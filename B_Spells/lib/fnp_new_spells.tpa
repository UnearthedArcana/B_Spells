////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////             DIVINE SPELLS               //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Reorganize by level...(though, it's fine to keep the files in the same place...)
//Informal prefix seperating different spelltypes

//xx = consecutive, but otherwise random, numbers
//n = spell level

//zero level cantrips: b_wc_1xx (wizard cantrips)
//zero level cantrips: b_pc_1xx (priest cantrips)

//1st level cantrips: b_1w1xx (wizard cantrips)
//1st level cantrips: b_2c1xx (priest cantrips)

//Regular added spells b_wnxx(wizard spells)
//Regular added spells b_pnxx(priest spells)
//Regular added spells b_rnxx (ranger spells)

/*
opcode = 177
target = 2
power = 0
timing = 4
parameter1 = 5
parameter2 = 160
power = 0
resist_dispel = 2
duration = 1
probability1 = 100
probability2 = 0
dicenumber = 0
dicesize = 0
savingthrow = 0
savebonus = 0
header =
insert_point = 7

//EG
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Snilloc's Snowball Swarm_____________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
ADD_PROJECTILE ~%folder%/data/iwd_spells/wizard_2/IDPRO217.pro~   //projectile
//VVC
COPY ~%folder%/data/iwd_spells/wizard_2/#SSSWARM.vvc~ ~override~   //animation
//bam
COPY ~%folder%/data/iwd_spells/wizard_2/SSSWART.BAM~ ~override~   //animation
COPY ~%folder%/data/iwd_spells/wizard_2/SSSWARR.BAM~ ~override~   //animation
COPY ~%folder%/data/iwd_spells/wizard_2/SSSWARX.BAM~ ~override~   //animation
//animations
//3d animation
//sounds
COPY ~%folder%/data/iwd_spells/wizard_2/TRA_18.WAV~ ~override~   //
COPY ~%folder%/data/iwd_spells/wizard_2/RNG_M02.WAV~ ~override~   //
//effs
//Spell itself
ADD_SPELL ~%folder%/data/iwd_spells/wizard_2/b_w204.spl~ 2 2 ~WIZARD_SNILLOCS_SNOWBALL_SWARM~ //
        SAY NAME1 @2040000
        SAY NAME2 @2040000
        SAY UNIDENTIFIED_DESC @2040001
	SAY DESC @2040001

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_SNILLOCS_SNOWBALL_SWARM~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 318            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO217% STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

//Sh. of Entropy immunity list
INCLUDE ~%folder%/lib/spell_lists/entropy_list.tpa~

FYI   */

//template
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Spell Name________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Cleric/Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Ranger Only

////////////////////////////
//////NOTES:
////////////////////////////

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////




//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 1  //////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Abundant Ammunition________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Ranger Only
////////////////////////////
//////NOTES:
////////////////////////////
//COMPATIBILITY: IN FNP WILL BE ADDED TO WAR SPHERE

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

/* //for copying and changing existing
COPY_EXISTING ~AROW08.itm~ ~override/B_TEST01.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0
      WRITE_ASCIIE 0x003a ~IAROW07~  //inv bam
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 12 parameter2 = 65536   // acid damage
      STR_VAR
  END      //
 LPF ALTER_ITEM_HEADER INT_VAR projectile = 12 STR_VAR icon = EVAL  ~IAROW07~  END    //
*/

//2da
COPY ~%folder%/data/new_spells/ranger_1/b_r101.2da~ ~override~

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

ADD_SPELL ~%folder%/data/new_spells/ranger_1/b_r101.spl~ 1 0 ~CLERIC_ABUNDANT_AMMO~ // won't be selectable at 1st; have to add to clab (ranger lev 8 or 9, whenever they normally get 1st lev spells)
        SAY NAME1 @53000
        SAY NAME2 @53000
        SAY UNIDENTIFIED_DESC @53001
		SAY DESC @53001
//prevent druids from having this spell
		LPF ALTER_SPELL_TYPE INT_VAR opp_school_align = 16 STR_VAR END    //Prohibit moral neutral (I think)


//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_ABUNDANT_AMMO~
  RET spell_res
END

//items and subspells
//Hunting Arrows
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override~   //Hunting Arrows spl
        SAY NAME1 @53004
        SAY NAME2 @53004
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_ARW01~
  END      //    B_LEAD1.spl

//the actual arrow
COPY ~%folder%/data/new_spells/ranger_1/B_ARW01.itm~ ~override~   //Hunting Arrows
        SAY NAME1 @53004
        SAY NAME2 @53004
        SAY UNIDENTIFIED_DESC @53005
	SAY DESC @53005
//bleeding spell
COPY ~%folder%/data/new_spells/ranger_1/b_lead1.spl~ ~override~   //Bleeding 1
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = RESOLVE_STR_REF (@53006) END  //Notification: Bleeding

//Hunting bolt
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101B.SPL~   //Hunting Bolt spl
        SAY NAME1 @53007
        SAY NAME2 @53007
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_QUA01~
  END      //

//the actual bolt
COPY ~%folder%/data/new_spells/ranger_1/B_QUA01.itm~ ~override~   //Hunting bolt
        SAY NAME1 @53007
        SAY NAME2 @53007
        SAY UNIDENTIFIED_DESC @53008
	SAY DESC @53008
//bam (just in case)
COPY ~%folder%/data/new_spells/ranger_1/IBOLT09.bam~ ~override~   //Hunting bolt

//Weighted Bullet

COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101C.SPL~   //Weighted Bullet spl
        SAY NAME1 @53009
        SAY NAME2 @53009
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_BUT01~
  END      //
//the actual bullet
COPY ~%folder%/data/new_spells/ranger_1/B_BUT01.itm~ ~override~   //Weighted Bullet
        SAY NAME1 @53009
        SAY NAME2 @53009
        SAY UNIDENTIFIED_DESC @53010
	SAY DESC @53010
//bam (just in case)
COPY ~%folder%/data/new_spells/ranger_1/IBULL09.bam~ ~override~   //Weighted Bullet

//Keen Arrows
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101D~   //Keen Arrows spl
        SAY NAME1 @53011
        SAY NAME2 @53011
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_ARW02~
  END      //

//the actual arrow
COPY ~%folder%/data/new_spells/ranger_1/B_ARW02.itm~ ~override~   //Keen Arrows 
        SAY NAME1 @53011
        SAY NAME2 @53011
        SAY UNIDENTIFIED_DESC @53012
	SAY DESC @53012

//Keen Bolt

COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101E~   //Keen bolt spl
        SAY NAME1 @53013
        SAY NAME2 @53013
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_QUA02~
  END      //
//the actual bolt
COPY ~%folder%/data/new_spells/ranger_1/B_QUA02.itm~ ~override~   //Keen Bolt
        SAY NAME1 @53013
        SAY NAME2 @53013
        SAY UNIDENTIFIED_DESC @53014
	SAY DESC @53014

//Balanced Bullet

COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101F.SPL~   //Balanced Bullet spl
        SAY NAME1 @53015
        SAY NAME2 @53015
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_BUT02~
  END      //
//the actual bullet
COPY ~%folder%/data/new_spells/ranger_1/B_BUT02.itm~ ~override~   //Balanced Bullet
        SAY NAME1 @53015
        SAY NAME2 @53015
        SAY UNIDENTIFIED_DESC @53016
	SAY DESC @53016

//Piercing Arrows
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101G~   //Piercing Arrows spl
        SAY NAME1 @53017
        SAY NAME2 @53017
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_ARW03~
  END      //

//the actual arrow
COPY ~%folder%/data/new_spells/ranger_1/B_ARW03.itm~ ~override~   //Piercing Arrows
        SAY NAME1 @53017
        SAY NAME2 @53017
        SAY UNIDENTIFIED_DESC @53018
	SAY DESC @53018

//Piercing Bolt
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101H~   //piercing bolt spl
        SAY NAME1 @53019
        SAY NAME2 @53019
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_QUA03~
  END      //
//the actual bolt
COPY ~%folder%/data/new_spells/ranger_1/B_QUA03.itm~ ~override~   //piercing Bolt
        SAY NAME1 @53019
        SAY NAME2 @53019
        SAY UNIDENTIFIED_DESC @53020
	SAY DESC @53020

//Eggshell Bullet

COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_R101F.SPL~   //Eggshell Bullet spl
        SAY NAME1 @53021
        SAY NAME2 @53021
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122            //
      STR_VAR resource = ~B_BUT03~
  END      //
//the actual bullet
COPY ~%folder%/data/new_spells/ranger_1/B_BUT03.itm~ ~override~   //Eggshell Bullet
        SAY NAME1 @53021
        SAY NAME2 @53021
        SAY UNIDENTIFIED_DESC @53022
	SAY DESC @53022   //B_INK01

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

COPY_EXISTING ~%spell_res%.spl~ ~override~
//add icons and projectile
  LPF ALTER_SPELL_HEADER STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/data/icons/ranger_1/B_R101A.bam~ ~override/%spell_res%A.bam~  //yes, dif folder
COPY ~%folder%/data/icons/ranger_1/B_R101B.bam~ ~override/%spell_res%B.bam~
COPY ~%folder%/data/new_spells/ranger_1/B_R101C.bam~ ~override/%spell_res%C.bam~
//add bams to spl
//COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

////////////////////////////
//////Portrait Icons:
////////////////////////////
//NA

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////
//NA
////////////////////////////
//////Scrolls: Creation
////////////////////////////
//TO DO CONTINUE 

////////////////////////////
//////Scrolls: Placement
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Compatibility
////////////////////////////
//FNP war/combat sphere






//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Animal Friendship_________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////
//Not really necessary.  There are plenty of mods out there for this.  Tho, what about FNP???



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_____________________________________________________________Call Upon Faith__________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Call Upon Faith (+15% skills)

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Camouflage__________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only


////////////////////////////
//////NOTES:
////////////////////////////
//COMPATIBILITY: IN FNP WILL BE ADDED TO EARTH SPHERE

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

//script
COMPILE ~%folder%/data/new_spells/ranger_1/B_CAMO.baf~
//cre
COPY ~%folder%/data/new_spells/ranger_1/B_CAMO.cre~ ~override~
//itm
COPY ~%folder%/data/new_spells/ranger_1/B_INVIS.itm~ ~override~

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

ADD_SPELL ~%folder%/data/new_spells/ranger_1/B_R102.spl~ 1 1 ~CLERIC_CAMOUFLAGE~ //
        SAY NAME1 @53022
        SAY NAME2 @53022
        SAY UNIDENTIFIED_DESC @53023
	SAY DESC @53023

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_CAMOUFLAGE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 321            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //  Remove earlier versions of spell

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////
COPY_EXISTING ~%spell_res%.spl~ ~override~
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
 COPY ~%folder%/data/icons/ranger_1/B_R102a.bam~ ~override/%spell_res%a.bam~
 COPY ~%folder%/data/icons/ranger_1/B_R102b.bam~ ~override/%spell_res%b.bam~
 COPY ~%folder%/data/icons/ranger_1/B_R102c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

////////////////////////////
//////Portrait Icons:
////////////////////////////

COPY ~%folder%/data/port_icons/ranger_1/B_R102P.bam~ ~override~


////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////
//NA? 

////////////////////////////
//////Scrolls: Creation
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Scrolls: Placement
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Compatibility
////////////////////////////
//TO DO CONTINUE




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//______________________________________________________________Cheetah's Sprint________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only

ACTION_IF (%cheetah_sprint% > 0) BEGIN  //

////////////////////////////
//////NOTES:
////////////////////////////
//Cheetah's Sprint 1 round x10 movement
//Use B_DD101
//change name to Sprint

////////////////////////////////
//////Add Icons, Projectiles and Scrolls:
////////////////////////////////

LAF ADD_ICONS
    INT_VAR port_text     = RESOLVE_STR_REF(@1106)   //Sprinting
            rename        = 1
            add_port_icon = 1
            create_scroll = 1
            gen_scroll    = 1
            high_hedge    = 1       //place a scroll or two in hedge hedge (if present--bgee)
            high_hedge_no = 1       //Number of scrolls sold at High Hedge (default 1)
            pen_parch     = 1       //place a scroll or two in Pen and Parchment  (if present--bg2ee)
            pen_parch_no  = 1       //Number of scrolls sold at Pen and Parchment (default 1)
            under_merch   = 1       //place a scroll or two in underdark merchant (if present--bg2ee)
            under_merch_no = 2       //Number of scrolls sold at underdark merchant (default 1)
            sor_sun       = 1       //place a scroll or two in Sorcerous Sundries  (if present--bgee and maybe sod)
            sor_sun_no    = 1       //Number of scrolls sold at Sorcerous Sundries (default 1)
            sod_store     = 1       //place a scroll or two in ...some SOD store  (if present--maybe sod)
            sod_store_no  = 1       //Number of scrolls sold at ...some SOD store (default 1)
    STR_VAR spell_name    = EVAL ~%spell_res%~ //
            pathA         = ~%folder%/data/icons/priest_1/B_DD101A.bam~
            pathB         = ~%folder%/data/icons/priest_1/B_DD101B.bam~
            pathC         = ~%folder%/data/icons/priest_1/B_DD101C.bam~
            pathP         = ~%folder%/data/port_icons/priest_1/B_DD101P.bam~
            scroll_path   = ~%folder%/data/iwd_spells/wizard_2/SPWI223A.itm~   //blank scroll
    RET    port_icon
           scroll_name
           iconA
           iconB
           iconC
           iconP
END

END   //end spell


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Disrupt Undead______________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Cleric/Paladin Only


////////////////////////////
//////NOTES:
////////////////////////////

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_E04.wav~ ~override~ // Added for eyes of dead...still, copying over just in case
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/death/b_c105.spl~ 1 1 ~CLERIC_DISRUPT_UNDEAD~ //
        SAY NAME1 @50307
        SAY NAME2 @50307
        SAY UNIDENTIFIED_DESC @50308
	SAY DESC @50308

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_DISRUPT_UNDEAD~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/death/b_c105a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/death/b_c105b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/death/b_c105c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////
//TEXT:
//Change to life sphere if FnP installed
ACTION_IF FILE_EXISTS_IN_GAME ~d5_spheres.d5~ BEGIN
COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @50309//old text
 SPRINT new @50310//new text
  READ_LONG 0x50 "valid"
  PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
  READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //
	END
  SAY_EVALUATED 0x50 ~%new_desc%~
  END  //
END
//TO DO CONTINUE


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Eyes of the Dead____________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Cleric/Paladin Only

////////////////////////////
//////NOTES:
////////////////////////////
//MAKE PORTRAIT ICON FOR CASTER (Impeded while active)
//MAKE SO CAN"T CAST OTHER 'EYe' like spells (Wizard eye/Animal eyes)
//allow spell to be dispelled by summons.  The spell should summon an invisible monster that dispels the spell from caster if a global is set.
//the innate that dispels the spell sets the global that makes the summoned cre dispell the effect

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_E04.wav~ ~override~ // #EFF_P04
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
ADD_SPELL ~%folder%/spheres/spells/death/b_c104.spl~ 1 1 ~CLERIC_EYES_OF_THE_DEAD~ //
        SAY NAME1 @50304
        SAY NAME2 @50304
        SAY UNIDENTIFIED_DESC @50305
	SAY DESC @50305
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_EYES_OF_THE_DEAD~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/death/b_c104a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/death/b_c104b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/death/b_c104c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

////////////////////////////
//////Portrait Icons:
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////
//NA? Hmmm, strong undead should be immune
 //TO DO CONTINUE

////////////////////////////
//////Scrolls: Creation
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Scrolls: Placement
////////////////////////////
//TO DO CONTINUE 

////////////////////////////
//////Compatibility
////////////////////////////
//0 lev cantrips
//if 0 lev cantrips installed, change to orison
ACTION_IF FILE_EXISTS_IN_GAME ~b_cant.itm~ BEGIN
//change level to Orison
COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @11//old text
 SPRINT new @12//new text
  READ_LONG 0x50 "valid"
  PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
  READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old with new (charm to thought sphere)
	END
  SAY_EVALUATED 0x50 ~%new_desc%~
  END  // Now, actually make it a 0 level spell
COPY_EXISTING ~%spell_res%.spl~ ~override~
 WRITE_BYTE 0x1c 4//Innate
 WRITE_BYTE 0x21 (THIS | 0b11000000)
 LPF ALTER_SPELL_HEADER INT_VAR location = 4 END   //innate location
//global
COPY_EXISTING ~%spell_res%.spl~ ~override~
	PATCH_IF (~%SOURCE_SIZE%~ > ~0x71~) BEGIN
		   READ_SHORT 0x1c spell_type
PATCH_IF  (%spell_type% = 4) BEGIN
        READ_LONG 	0x64	ab_off			// Abilities Offset
	READ_SHORT	0x68	ab_num			// Number of Abilities
	READ_SHORT	0x6a	fx_off			// Effects Offset
	READ_SHORT	0x70	glob_fx			// Number of Global Effects
	SET	glob_add = 0

	INSERT_BYTES (fx_off) 0x30
	  WRITE_SHORT (fx_off) 171			// Give innate
	  WRITE_BYTE (fx_off + 0x2) 1			// Target Self
	  WRITE_BYTE (fx_off + 0x3) 1			// power
	  WRITE_LONG (fx_off + 0x8) 0			// Wizard
	  WRITE_LONG (fx_off + 0xc) 9			// perm
	  WRITE_BYTE (fx_off + 0x12) 100		// Probability 1
	  WRITE_ASCIIE (fx_off + 0x14) ~%spell_res%~	// resource
	++glob_add

        INSERT_BYTES (fx_off) 0x30
	  WRITE_SHORT (fx_off) 172			// Remove spell
	  WRITE_BYTE (fx_off + 0x2) 1			// Target Self
	  WRITE_BYTE (fx_off + 0x3) 1			// power
	  WRITE_LONG (fx_off + 0x8) 0			// Wizard
	  WRITE_LONG (fx_off + 0xc) 9			// perm
	  WRITE_BYTE (fx_off + 0x12) 100		// Probability 1
	  WRITE_ASCIIE (fx_off + 0x14) ~%spell_res%~	// resource
	++glob_add

//	INSERT_BYTES (fx_off) 0x30			//Second effect
//	  WRITE_etc...
//	++glob_add

	glob_fx += glob_add
	WRITE_SHORT 0x70 glob_fx			// Increment Number of Global Effects
	FOR (i = 0; i < ab_num; ++i) BEGIN		// Offset Effect Index for all Abilities
	  READ_SHORT (ab_off + i * 0x28 + 0x20) fx_idx
	  WRITE_SHORT (ab_off + i * 0x28 + 0x20) (fx_idx + glob_add)
	END
END
END

//NOTE: IF CANTRIPS INSTALLED, FNP NEEDS TO CHECK FOR THAT, AND MAKE PROPER ADJUSTMENTS
END  //end Cantrip compatibility

//TO DO CONTINUE

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Frost Fingers_______________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only

////////////////////////////
//////NOTES:
////////////////////////////
//Add scroll, and add scroll to stores
//NEED to BE MORE DESCERNING about placement.  Just add the scroll for now
//ALso ADD TO IWDEE STORES/Creatures

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////
//Projectile
ADD_PROJECTILE ~%folder%/spheres/spells/water/B_C103.pro~   //projectile

//bam
COPY ~%folder%/spheres/spells/water/cocoldt.bam~ ~override~ // Frost Fingers

//sounds
COPY ~%folder%/data/iwd_spells/wizard_2/TRA_18.WAV~ ~override~   //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
ADD_SPELL ~%folder%/spheres/spells/water/b_c103.spl~ 1 1 ~CLERIC_FROST_FINGERS~ //
        SAY NAME1 @51707
        SAY NAME2 @51707
        SAY UNIDENTIFIED_DESC @51708
	SAY DESC @51708
//
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_FROST_FINGERS~
  RET spell_res
END

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////
COPY_EXISTING ~%spell_res%.spl~ ~override~
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR projectile = %B_C103% STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/water/B_C103a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/water/B_C103b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/water/B_C103c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

////////////////////////////
//////Portrait Icons:
////////////////////////////
//NA

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////
//TO DO CONTINUE

////////////////////////////
//////Scrolls: Creation
////////////////////////////
//Copy over the scroll:
COPY ~%folder%/spheres/scrolls/D1148.itm~ ~override/B_FRST1.itm~   //cuz it's a 148 scroll...
        SAY NAME1 @900009016
        SAY NAME2 @51707
	SAY DESC @51708
//Change icon
        WRITE_ASCIIE 0x3a ~%spell_res%A~
 COPY_EXISTING ~B_FRST1.itm~ ~override~     //these work
  LPF ALTER_ITEM_HEADER STR_VAR icon = EVAL  ~%spell_res%A~ END
//  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL  ~%spell_res%~ END   //target cre
  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 148 STR_VAR resource = EVAL  ~%spell_res%~ END   //target area

////////////////////////////
//////Scrolls: Placement
////////////////////////////
//TO DO CONTINUE

/* Placement...Research!!!
//BGEE - Sorcerous Sundries
ACTION_IF GAME_IS ~bgee~ THEN BEGIN   //  ACTION_IF GAME_IS ~bgee sod~ THEN BEGIN
  COPY_EXISTING ~STO0703.sto~ ~override~
    ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
//High Hedge
  COPY_EXISTING ~HIGHHEDG.sto~ ~override~
    ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END
END

ACTION_IF GAME_IS ~bg2ee eet~ THEN BEGIN   //  A
//Lady Yuth
COPY_EXISTING ~SCROLLS.STO~ ~override~
 ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #4
//Underdark
COPY_EXISTING ~UDDROW25.STO~ ~override~
 ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #4

 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END

 ACTION_IF FILE_EXISTS_IN_GAME ~STO0703.STO~ BEGIN  //SoD
  COPY_EXISTING ~STO0703.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END

END
*/

////////////////////////////
//////Compatibility
////////////////////////////

//SR NWN Deflection Compatibiilty
OUTER_SET $aoe_spell(~CLERIC_FROST_FINGERS~)=1

//TO DO CONTINUE

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Guardian____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Guardian +x to saves to one character


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Guidance____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Guidance (Knowledge): Target temporarily gains an additional rank in a known skill (if Proficiencies?), and/or weapon prof
//Caster only


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Divine Smite________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//HOW WILL THIS INTERACT WITH THE VARIOUS PALADIN/CHAMPION SMITES?

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/Destruction/b_pr101.spl~ 1 1 ~CLERIC_HAND_OF_CARNAGE~ //
	SAY NAME1 @50401
	SAY NAME2 @50401
	SAY UNIDENTIFIED_DESC @50402
	SAY DESC @50402
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_HAND_OF_CARNAGE~
  RET spell_res
END
//effs
COPY ~%folder%/spheres/spells/Destruction/b_pr101.eff~ ~override/%spell_res%B.eff~
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 248            //
      STR_VAR resource = EVAL ~%spell_res%B~
  END      //
//add icons and projectile
  LPF ALTER_SPELL_HEADER STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/Destruction/b_c101a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/Destruction/b_c101b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/Destruction/b_c101c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

//Portrait Icons
//Icon itself
COPY ~%folder%/spheres/spells/Destruction/B_SMITE.bam~ ~override~
 SET strref = RESOLVE_STR_REF(@50401)

//Thanks kjeron and argent77!!!
//BG(2)EE only for now (i.e. not IWDEE--Need update)
ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
 COPY_EXISTING ~STATDESC.2DA~ override
  COUNT_2DA_COLS cols
  COUNT_2DA_ROWS cols rows
  SET max = 0
  FOR (i = 0; i < rows; ++i) BEGIN
   READ_2DA_ENTRY i 0 cols num
   PATCH_IF num > max BEGIN max = num END
  END
SET max += 1
INSERT_2DA_ROW rows cols ~%max%   %strref%   B_SMITE~
PRETTY_PRINT_2DA
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = %max% END           //
END

//IWDEE just use smite display string
ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
 COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 parameter2 = 146 END           //
END

//Add scroll, and add scroll to stores
//NEED to BE MORE DESCERNING about placement.  Just add the scroll for now
//ALso ADD TO IWDEE STORES/Creatures

//Copy over the scroll:
COPY ~%folder%/spheres/scrolls/C1146.itm~ ~override/B_CARN.itm~   //cuz it's a 146 scroll...
        SAY NAME1 @900009016
        SAY NAME2 @50401
	SAY DESC @50402
//Change icon
        WRITE_ASCIIE 0x3a ~%spell_res%A~
 COPY_EXISTING ~B_CARN.itm~ ~override~     //these work
  LPF ALTER_ITEM_HEADER STR_VAR icon = EVAL  ~%spell_res%A~ END
  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL  ~%spell_res%~ END   //target cre
//  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 148 STR_VAR resource = EVAL  ~%spell_res%~ END   //target area

/* Placement...Research!!!
//BGEE - Sorcerous Sundries
ACTION_IF GAME_IS ~bgee~ THEN BEGIN   //  ACTION_IF GAME_IS ~bgee sod~ THEN BEGIN
  COPY_EXISTING ~STO0703.sto~ ~override~
    ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
//High Hedge
  COPY_EXISTING ~HIGHHEDG.sto~ ~override~
    ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END
END

ACTION_IF GAME_IS ~bg2ee eet~ THEN BEGIN   //  A
//Lady Yuth
COPY_EXISTING ~SCROLLS.STO~ ~override~
 ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #4
//Underdark
COPY_EXISTING ~UDDROW25.STO~ ~override~
 ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #4

 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END

 ACTION_IF FILE_EXISTS_IN_GAME ~STO0703.STO~ BEGIN  //SoD
  COPY_EXISTING ~STO0703.STO~ ~override~
   ADD_STORE_ITEM ~SCBLOO~ #1 #0 #0 ~IDENTIFIED~ #2
 END

END
*/

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_____________________________________________________________Invisibilty to undead____________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Invisibilty to undead May not be feasible...

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//___________________________________________________________________Magic Weapon_______________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Bless Water (create a temp flask of holy water that damages undead)
//Projectile
//VVC
//bam
//animations
//3d animation
//effs
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_1/B_C107.spl~ 1 1 ~CLERIC_MAGIC_WEAPON~ //
        SAY NAME1 @53025
        SAY NAME2 @53025
        SAY UNIDENTIFIED_DESC @53026
	SAY DESC @53026
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_MAGIC_WEAPON~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 321            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
//itm
/*
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/animal/b_c102a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/animal/b_c102b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/animal/b_c102c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
*/

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Protection from Cantrips__________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Protection from Cantrips (Protection): Target is immune to all cantrips/orisons.  Check for cantrips from TnB or B_Spells.

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________________Stalk_____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Stalk +20% hide backstab (ranger only)

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_______________________________________________________________Speak with animals_____________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Speak with animals (would be cool...)

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 2  //////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_________________________________________________________________CASTIGATE____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//The spell
ADD_SPELL ~%folder%/data/new_spells/priest_2/B_PL101.spl~ 1 2 ~CLERIC_CASTIGATE~ //
          SAY NAME1 @53031
          SAY NAME2 @53031
          SAY UNIDENTIFIED_DESC @53032
  	  SAY DESC @53032
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_CASTIGATE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR duration = 6 STR_VAR END  //Duration 1 round
  LPF ALTER_EFFECT INT_VAR match_opcode = 324 duration = 1 STR_VAR END  //
  //fear notification (orig is iwdee)
ACTION_IF GAME_IS ~bg2ee eet~ BEGIN
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = 14007 STR_VAR END  //panic notification
END
ACTION_IF GAME_IS ~bgee~ BEGIN
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 139 parameter1 = 25818 STR_VAR END  //panic notification
END

////////////////////////////////
//////Add Icons, Projectiles and Scrolls:
////////////////////////////////

LAF ADD_ICONS
    INT_VAR port_text     = RESOLVE_STR_REF(@1105)   //Castigated
            rename        = 1
            add_port_icon = 1
            create_scroll = 1
            gen_scroll    = 1
            high_hedge    = 1       //place a scroll or two in hedge hedge (if present--bgee)
            high_hedge_no = 1       //Number of scrolls sold at High Hedge (default 1)
            pen_parch     = 1       //place a scroll or two in Pen and Parchment  (if present--bg2ee)
            pen_parch_no  = 1       //Number of scrolls sold at Pen and Parchment (default 1)
            under_merch   = 1       //place a scroll or two in underdark merchant (if present--bg2ee)
            under_merch_no = 2       //Number of scrolls sold at underdark merchant (default 1)
            sor_sun       = 1       //place a scroll or two in Sorcerous Sundries  (if present--bgee and maybe sod)
            sor_sun_no    = 1       //Number of scrolls sold at Sorcerous Sundries (default 1)
            sod_store     = 1       //place a scroll or two in ...some SOD store  (if present--maybe sod)
            sod_store_no  = 1       //Number of scrolls sold at ...some SOD store (default 1)
    STR_VAR spell_name    = EVAL ~%spell_res%~ //
            pathA         = ~%folder%/data/icons/priest_1/B_PL101A.bam~
            pathB         = ~%folder%/data/icons/priest_1/B_PL101b.bam~
            pathC         = ~%folder%/data/icons/priest_1/B_PL101c.bam~
            pathP         = ~%folder%/data/port_icons/priest_1/B_PL101P.bam~
            scroll_path   = ~%folder%/data/iwd_spells/wizard_2/SPWI223A.itm~   //blank scroll
    RET    port_icon
           scroll_name
           iconA
           iconB
           iconC
           iconP
END

INCLUDE ~%folder%/lib/spell_lists/command_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/2nd_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/blood_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/emotion_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/fear_list.tpa~



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_________________________________________________________________ENTHRALL_____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//The spell
ADD_SPELL ~%folder%/data/new_spells/priest_2/b_p201.spl~ 1 2 ~CLERIC_ENTHRALL~ //
          SAY NAME1 @50806
          SAY NAME2 @50806
          SAY UNIDENTIFIED_DESC @50807
  	  SAY DESC @50807
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_ENTHRALL~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 232 STR_VAR resource = EVAL ~%spell_res%A~ END  //Hypno remover
  LPF ALTER_EFFECT INT_VAR match_opcode = 324 STR_VAR resource = EVAL ~%spell_res%~ END   //no undead
  LPF CLONE_EFFECT INT_VAR match_opcode = 76 opcode = 139 parameter1 = RESOLVE_STR_REF (@50808) END  //Notification: Enthralled
  LPF CLONE_EFFECT INT_VAR match_opcode = 324 parameter2 = 27 STR_VAR resource = EVAL ~%spell_res%~ END  //no golem

COPY ~%folder%/data/new_spells/priest_2/b_p201a.spl~ ~override/%spell_res%A.spl~   //Notification: No longer Enthralled
          SAY NAME1 @50809
          SAY NAME2 @50809
  LPF ALTER_EFFECT INT_VAR match_opcode = 321 STR_VAR resource = EVAL ~%spell_res%~ END  //
/*
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR projectile = %IDPRO217% STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/data/iwd_spells/wizard_2/SPWI204c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
*/
  //PROTECTION FROM COMMAND?
INCLUDE ~%folder%/lib/spell_lists/command_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/2nd_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/blood_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/emotion_list.tpa~
//INCLUDE ~%folder%/lib/spell_lists/emo_disp_list.tpa~  //What is this?

//FnP: Thought/charm...there are a lot of those...

//The Scroll
/*
//Copy over the scroll:
COPY ~Spells/data/iwd_spells/wizard_2/SPWI223A.itm~ ~override~
        SAY NAME1 @900009016
        SAY NAME2 @2250000
	SAY DESC @2250001
//Change icon
        WRITE_ASCIIE 0x3a ~%spell_res%A~
 COPY_EXISTING ~SPWI223A.itm~ ~override~     //these work
  LPF ALTER_ITEM_HEADER STR_VAR icon = EVAL  ~%spell_res%A~ END
  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 146 STR_VAR resource = EVAL  ~%spell_res%~ END
  LPF ALTER_ITEM_EFFECT INT_VAR check_headers = 1 match_opcode = 147 STR_VAR resource = EVAL  ~%spell_res%~ END
//BGEE - Sorcerous Sundries
ACTION_IF GAME_IS ~bgee~ THEN BEGIN   //  ACTION_IF GAME_IS ~bgee sod~ THEN BEGIN
  COPY_EXISTING ~STO0703.sto~ ~override~
    ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #2
//High Hedge
  COPY_EXISTING ~HIGHHEDG.sto~ ~override~
    ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #2
 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #2
 END
END

ACTION_IF GAME_IS ~bg2ee eet~ THEN BEGIN   //  A
//Lady Yuth
COPY_EXISTING ~SCROLLS.STO~ ~override~
 ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #4
//Underdark
COPY_EXISTING ~UDDROW25.STO~ ~override~
 ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #4

 ACTION_IF FILE_EXISTS_IN_GAME ~BDSORCSC.STO~ BEGIN  //SoD
  COPY_EXISTING ~BDSORCSC.STO~ ~override~
   ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #2
 END

 ACTION_IF FILE_EXISTS_IN_GAME ~STO0703.STO~ BEGIN  //SoD
  COPY_EXISTING ~STO0703.STO~ ~override~
   ADD_STORE_ITEM ~SPWI223A~ #1 #0 #0 ~IDENTIFIED~ #2
 END

END */



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Forbiddance_______________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//MAKE CUSTOM ICON

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/charm/b_c201.spl~ 1 2 ~CLERIC_FORBID~ //
        SAY NAME1 @50800
        SAY NAME2 @50800
        SAY UNIDENTIFIED_DESC @50801
	SAY DESC @50801

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_FORBID~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324
      STR_VAR resource = EVAL ~%spell_res%~
     END
//add icons and projectile
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/charm/b_c201a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/charm/b_c201b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/charm/b_c201c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
//PROTECTION FROM COMMAND?
INCLUDE ~%folder%/lib/spell_lists/command_list.tpa~

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Ice Blade_________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
//itms
//blades
COPY ~%folder%/spheres/spells/water/moonbla.bam~ ~override~   //bam
COPY ~%folder%/spheres/spells/water/b_iceb1.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51710
	    SAY DESC @51710
COPY ~%folder%/spheres/spells/water/b_iceb2.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51711
	    SAY DESC @51711
COPY ~%folder%/spheres/spells/water/b_iceb3.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51712
	    SAY DESC @51712
COPY ~%folder%/spheres/spells/water/b_iceb4.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51713
	    SAY DESC @51713
COPY ~%folder%/spheres/spells/water/b_iceb5.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51714
	    SAY DESC @51714
COPY ~%folder%/spheres/spells/water/b_iceb6.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51715
	SAY DESC @51715
COPY ~%folder%/spheres/spells/water/b_iceb7.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51716
	SAY DESC @51716
COPY ~%folder%/spheres/spells/water/b_iceb8.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51717
	SAY DESC @51717
COPY ~%folder%/spheres/spells/water/b_iceb9.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51718
	SAY DESC @51718
COPY ~%folder%/spheres/spells/water/b_iceb10.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51719
	SAY DESC @51719
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/water/b_c203.spl~ 1 2 ~CLERIC_ICE_BLADE~ //
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51705
        SAY DESC @51705

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_ICE_BLADE~
  RET spell_res
END
//add icons and projectile
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/water/b_c203a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/water/b_c203b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/water/b_c203c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
//PROTECTION FROM ICE?  May be necessary
INCLUDE ~%folder%/lib/spell_lists/ice_list.tpa~


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//______________________________________________________________Minor Creation__________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/* //for copying and changing existing
COPY_EXISTING ~AROW08.itm~ ~override/B_TEST01.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0
      WRITE_ASCIIE 0x003a ~IAROW07~  //inv bam
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 12 parameter2 = 65536   // acid damage
      STR_VAR
  END      //
 LPF ALTER_ITEM_HEADER INT_VAR projectile = 12 STR_VAR icon = EVAL  ~IAROW07~  END    //
*/

//THIS AIn'T READY!
/*
//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
//2da
COPY ~%folder%/data/new_spells/priest_2/B_C211A.2da~ ~override~    //lev 1-3
COPY ~%folder%/data/new_spells/priest_2/B_C211A.2da~ ~override~    //lev 4-6
COPY ~%folder%/data/new_spells/priest_2/B_C211A.2da~ ~override~    //lev 7-9
COPY ~%folder%/data/new_spells/priest_2/B_C211A.2da~ ~override~    //lev 10-12
COPY ~%folder%/data/new_spells/priest_2/B_C211A.2da~ ~override~    //lev 13+
//effs
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_2/B_C211.spl~ 1 2 ~CLERIC_MINOR_CREATION~ // won't be selectable at 1st; have to add to clab (ranger lev 8 or 9, whenever they normally get 1st lev spells)
        SAY NAME1 @53033
        SAY NAME2 @53033
        SAY UNIDENTIFIED_DESC @53034
	SAY DESC @53034
//okay...items
//long sword
COPY_EXISTING ~SW1H04.itm~ ~override/B_CR001.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0
//l.swd spells
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_CR001A.SPL~   //Long sword1 spl
        SAY NAME1 #2893
        SAY NAME2 #2893
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122  parameter1 = 2          // 2 items (4 lbs ea)
      STR_VAR resource = ~B_CR001~
  END      //

COPY ~%folder%/data/new_spells/ranger_1/B_R101A.SPL~ ~override/B_CR001B.SPL~   //Long sword2 spl
        SAY NAME1 #2893
        SAY NAME2 #2893
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 122  parameter1 = 5          // 5 items (4 lbs ea)
      STR_VAR resource = ~B_CR001~
  END      //

//CONTINUE  SPELLS

//short sword
COPY_EXISTING ~SW1H07.itm~ ~override/B_CR002.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0

//CONTINUE  SPELLS

//Dagger
COPY_EXISTING ~DAGG01.itm~ ~override/B_CR003.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0

//CONTINUE  SPELLS

//B,Axe
COPY_EXISTING ~AX1H01.itm~ ~override/B_CR004.itm~
      WRITE_LONG 0x0034 0   //price 0
      WRITE_BYTE 0x0042 0   //id lore 0
//CONTINUE  SPELLS

//CONTINUE  ITEMS!!!


//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_MINOR_CREATION~
  RET spell_res
END

/* //no custom icons yet
//bams seem to be messed up (sigh, again!)
COPY_EXISTING ~%spell_res%.spl~ ~override~
//add icons and projectile
  LPF ALTER_SPELL_HEADER STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/data/new_spells/ranger_1/B_R101A.bam~ ~override/%spell_res%A.bam~
COPY ~%folder%/data/new_spells/ranger_1/B_R101B.bam~ ~override/%spell_res%B.bam~
COPY ~%folder%/data/new_spells/ranger_1/B_R101C.bam~ ~override/%spell_res%C.bam~
//add bams to spl
//COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

//Sh. of Entropy immunity list
//INCLUDE ~%folder%/lib/spell_lists/entropy_list.tpa~

//COMPATIBILITY: IN FNP WILL BE ADDED TO WAR SPHERE

*/  //custom icons
*/ //Remove when spell is ready

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Pacify the Dead___________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Make custom icon (may be cast at undead npcs)

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_E04.wav~ ~override~ // Already copied over (at least) twice, but just in case...
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/death/b_c202.spl~ 1 2 ~CLERIC_PACIFY_DEAD~ //
        SAY NAME1 @50301
        SAY NAME2 @50301
        SAY UNIDENTIFIED_DESC @50302
	SAY DESC @50302

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_PACIFY_DEAD~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324
      parameter1 = 0
      parameter2 = 2
      STR_VAR resource = EVAL ~%spell_res%~
     END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END

//
ACTION_IF FILE_EXISTS_IN_GAME ~spwi312.spl~ BEGIN
 COPY_EXISTING ~spwi312.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spwish25.spl~ BEGIN
 COPY_EXISTING ~spwish25.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spin146.spl~ BEGIN
 COPY_EXISTING ~spin146.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spin977.spl~ BEGIN
 COPY_EXISTING ~spin977.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spwm164.spl~ BEGIN
 COPY_EXISTING ~spwm164.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~%spell_res%~ END
//  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 patameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
//add icons and projectile
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/death/b_c202a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/death/b_c202b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/death/b_c202c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
//SR NWN Deflection Compatibiilty
OUTER_SET $aoe_spell(~CLERIC_PACIFY_DEAD~)=1


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Shatter_____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
COPY ~%folder%/spheres/spells/Destruction/EFF_E05.wav~ ~override~ //
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/Destruction/b_pr201.spl~ 1 2 ~CLERIC_SHATTER~ //
        SAY NAME1 @50408
        SAY NAME2 @50408
        SAY UNIDENTIFIED_DESC @50409
	SAY DESC @50409
//
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_SHATTER~
  RET spell_res
END
//sec spells
COPY ~%folder%/spheres/spells/Destruction/b_pr201A.spl~ ~override/%spell_res%A.spl~ // Shatter 2nd
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = EVAL  ~B_PR201A~ resource =  EVAL  ~%spell_res%A~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = EVAL  ~B_PR201C~ resource =  EVAL  ~%spell_res%C~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = EVAL  ~B_PR201D~ resource =  EVAL  ~%spell_res%D~ END
COPY ~%folder%/spheres/spells/Destruction/b_pr201B.spl~ ~override/%spell_res%B.spl~ // Shatter   3rd
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = EVAL  ~B_PR201A~ resource =  EVAL  ~%spell_res%A~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = EVAL  ~B_PR201C~ resource =  EVAL  ~%spell_res%C~ END
COPY ~%folder%/spheres/spells/Destruction/b_pr201A.eff~ ~override/%spell_res%A.eff~ // Shatter  x dam golem
COPY ~%folder%/spheres/spells/Destruction/b_pr201B.eff~ ~override/%spell_res%B.eff~ // Shatter  cast 2
  WRITE_EVALUATED_ASCII 0x0030 ~%spell_res%A~
COPY ~%folder%/spheres/spells/Destruction/b_pr201C.eff~ ~override/%spell_res%C.eff~ // Shatter  x dam
COPY ~%folder%/spheres/spells/Destruction/b_pr201D.eff~ ~override/%spell_res%D.eff~ // Shatter  cast 3
  WRITE_EVALUATED_ASCII 0x0030 ~%spell_res%B~
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = ~B_PR201A~ resource =  EVAL  ~%spell_res%A~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = ~B_PR201B~ resource =  EVAL  ~%spell_res%B~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = ~B_PR201C~ resource =  EVAL  ~%spell_res%C~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 177 STR_VAR match_resource = ~B_PR201D~ resource =  EVAL  ~%spell_res%D~ END

//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/Destruction/B_C204a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/Destruction/B_C204b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/Destruction/B_C204c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Stone Fist________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////




// check for SPSTONES.bam
//check for EFF_M08.wav
//Projectile
//VVC
//bam
//animations

//3d animation
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/earth/b_pr301.spl~ 1 3 ~CLERIC_STONE_FIST~ //
        SAY NAME1 @51501
        SAY NAME2 @51501
        SAY UNIDENTIFIED_DESC @51502
	SAY DESC @51502

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_STONE_FIST~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 111
      STR_VAR resource = EVAL ~%spell_res%~
     END
//itm
COPY ~%folder%/spheres/spells/earth/b_pr301.itm~ ~override/%spell_res%.itm~ // Actual Fist
        SAY NAME1 @51501
        SAY NAME2 @51501
        SAY UNIDENTIFIED_DESC @51504
	SAY DESC @51504

//add icons and projectile
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/earth/b_c303a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/earth/b_c303b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/earth/b_c303c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//______________________________________________________________WATERY FIST_____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Special Thanks to Requiem & Mordeus!  This is their spell and full credit for its creation belongs to them
//Projectile
//VVC
//bam
//animations
COPY ~%folder%/data/new_spells/priest_2/dppr221.bam~ ~override~ //
//3d animation
//sounds
//effs
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_2/DPPR221.spl~ 1 2 ~CLERIC_WATERY_FIST~ //
     SAY NAME1 @51722
     SAY NAME2 @51722
     SAY UNIDENTIFIED_DESC @51723
     SAY DESC @51723
//WATERY FIST

//FnP: Water


//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 3  ///////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_______________________________________________________Cloak of Darkness______________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//create portrait icon
COMPILE ~%folder%/data/new_spells/ranger_1/B_CAMO.baf~
//cre
COPY ~%folder%/data/new_spells/ranger_1/B_CAMO.cre~ ~override~
//itm
COPY ~%folder%/data/new_spells/ranger_1/B_INVIS.itm~ ~override~

ADD_SPELL ~%folder%/spheres/spells/shadow/b_c302.spl~ 1 3 ~CLERIC_CLOAK_DARKNESS~ //
        SAY NAME1 @52003
        SAY NAME2 @52003
        SAY UNIDENTIFIED_DESC @52004
	SAY DESC @52004
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_CLOAK_DARKNESS~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 318 STR_VAR resource = EVAL ~%spell_res%~
  END      //
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/shadow/B_C302a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/shadow/B_C302b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/shadow/B_C302c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

 //Continue from here

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________DICTATE_____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
//VVC
//bam
//animations
//sounds
//effs
//Using Command as a base spell
COPY_EXISTING ~SPPR102.spl~ ~override/b_p3xx.spl~
  WRITE_LONG 0x34 3//Change to level 3
//Spell itself
ADD_SPELL ~override/b_p3xx.spl~ 1 3 ~CLERIC_DICTATE~ //
          SAY NAME1 @50810
          SAY NAME2 @50810
  LPF ALTER_EFFECT INT_VAR match_opcode = 39 power = 3 duration = 30 STR_VAR END  //
  LPF ALTER_EFFECT INT_VAR match_opcode = 142 power = 3 duration = 30  STR_VAR END  //
  LPF ALTER_EFFECT INT_VAR match_opcode = 174 power = 3 STR_VAR END  //
  LPF ALTER_EFFECT INT_VAR match_opcode = 215 power = 3 STR_VAR END  //
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_DICTATE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~   //duration: 1 round to 5 rounds
  SPRINT old @50811//old text
  SPRINT new @50812//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
  SPRINT old @50813//old text
  SPRINT new @50814//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
  SPRINT old @50815//old text
  SPRINT new @50816//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
//PROTECTION FROM COMMAND?
INCLUDE ~%folder%/lib/spell_lists/command_list.tpa~

//FnP: Thought/Charm

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Feral Instinct____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
//effs
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_3/B_P302.spl~ 1 3 ~CLERIC_FERAL_INSTINCT~ //
        SAY NAME1 @50819
        SAY NAME2 @50819
        SAY UNIDENTIFIED_DESC @50820
	SAY DESC @50820
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_FERAL_INSTINCT~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 24 opcode = 139 parameter1 = RESOLVE_STR_REF (@50817) END  //Notification: Flight
  LPF CLONE_EFFECT INT_VAR match_opcode = 247 opcode = 139 parameter1 = RESOLVE_STR_REF (@50818) parameter2 = 0 END  //Notification: Fight
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324 power = 3           //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 247 power = 3           //
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 142 power = 3           // make custom port icon?
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 174 power = 3           //
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 215 power = 3           //
      STR_VAR
  END      //
/*
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/charm/b_c301a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/charm/b_c301b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/charm/b_c301c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
*/
// immunity list
INCLUDE ~%folder%/lib/spell_lists/3rd_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/emotion_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/fear_list.tpa~

//Sphere: Animal

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Murderous Command_________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
//VVC
//bam
//animations
//3d animation
//sounds
//effs
//Spell itself
ADD_SPELL ~%folder%/spheres/spells/charm/b_c301.spl~ 1 3 ~CLERIC_MURDEROUS_COMMAND~ //
        SAY NAME1 @50803
        SAY NAME2 @50803
        SAY UNIDENTIFIED_DESC @50804
	SAY DESC @50804

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_MURDEROUS_COMMAND~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324 power = 3           //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 247 power = 3           //
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 142 power = 3           // make custom port icon?
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 174 power = 3           //
      STR_VAR
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 215 power = 3           //
      STR_VAR
  END      //

//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/charm/b_c301a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/charm/b_c301b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/charm/b_c301c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~

// immunity list
INCLUDE ~%folder%/lib/spell_lists/3rd_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/blood_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/command_list.tpa~
INCLUDE ~%folder%/lib/spell_lists/emotion_list.tpa~

//FnP: THought/Charm

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//________________________________________________________________________Snare_________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//sec spells
COPY ~%folder%/data/new_spells/priest_3/b_trp01.spl~ ~override~
COPY ~%folder%/data/new_spells/priest_3/b_trp02.spl~ ~override~
COPY ~%folder%/data/new_spells/priest_3/b_trp03.spl~ ~override~
COPY ~%folder%/data/new_spells/priest_3/b_trp04.spl~ ~override~
COPY ~%folder%/data/new_spells/priest_3/b_trp05.spl~ ~override~
COPY ~%folder%/data/new_spells/priest_3/b_trp06.spl~ ~override~
//effs
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_3/b_dr301.spl~ 1 3 ~CLERIC_SNARE~ //
        SAY NAME1 @51420
        SAY NAME2 @51420
        SAY UNIDENTIFIED_DESC @51421
	SAY DESC @51421

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_SNARE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
COPY ~%folder%/data/new_spells/priest_3/b_dr301a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/data/new_spells/priest_3/b_dr301b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/data/new_spells/priest_3/b_dr301c.bam~ ~override/%spell_res%c.bam~

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 4  ///////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Storm Wall________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

COPY ~%folder%/spheres/spells/air/b_elect1.bam~ ~override~ //
COPY ~%folder%/spheres/spells/air/b_storm1.vvc~ ~override~ //
ADD_PROJECTILE ~%folder%/spheres/spells/air/b_storm1.pro~   //pro
ADD_SPELL ~%folder%/spheres/spells/air/b_c401.spl~ 1 4 ~CLERIC_STORMWALL~ //
        SAY NAME1 @51601
        SAY NAME2 @51601
        SAY UNIDENTIFIED_DESC @51602
	SAY DESC @51602
	WRITE_SHORT 0x098 ~%b_storm1%~

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_STORMWALL~
  RET spell_res
END
//sub spell
COPY ~%folder%/spheres/spells/air/b_c401a.spl~ ~override/%spell_res%A.spl~ //sub-spell
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 326            //
      STR_VAR resource = EVAL ~%spell_res%A~
  END      //
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 206            //
      STR_VAR resource = EVAL ~%spell_res%A~
  END      //
//add icons and projectile
  LPF ALTER_SPELL_HEADER INT_VAR projectile = %b_storm1%  END  //STR_VAR icon = EVAL  ~%spell_res%B~

//________________________________________________________________

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 5  ///////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Misfire___________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//________________________________________________________________
//icons
//COPY ~%folder%/spheres/spells/dread/b_c501b.bam~ ~override~ // Misfire   MAKE A SCROLL ICON
//COPY ~%folder%/spheres/spells/dread/b_c501c.bam~ ~override~ // Misfire
//spl etc
COPY ~%folder%/spheres/spells/dread/b_c501.eff~ ~override~ // Misfire
  SAY 0x1c @50901     //Misfire

ADD_SPELL ~%folder%/spheres/spells/dread/b_c501.spl~ 1 5 ~CLERIC_MISFIRE~ //
        SAY NAME1 @50901
        SAY NAME2 @50901
        SAY UNIDENTIFIED_DESC @50902
	SAY DESC @50902
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_MISFIRE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 321            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________shadowstep________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//not added in any equal way.  Just here to ensure B_Spells and FnP have same code base (sanity, and all)
//special case: __________________________________________________________
// Is this a spell?
COPY ~%folder%/spheres/spells/shadow/B_SSTEP.spl~ ~override~ // Shadowstep
        SAY NAME1 @52001
        SAY NAME2 @52001
        SAY UNIDENTIFIED_DESC @52002
	SAY DESC @52002


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Waves of Agony____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



//__________________________________________________________________________________
ADD_SPELL ~%folder%/spheres/spells/affliction/b_Pr501.spl~ 1 5 ~CLERIC_WAVES_OF_AGONY~ //
        SAY NAME1 @51201
        SAY NAME2 @51201
        SAY UNIDENTIFIED_DESC @51202
	SAY DESC @51202
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_WAVES_OF_AGONY~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT INT_VAR match_opcode = 146  STR_VAR resource = EVAL ~%spell_res%A~   END      // change spl ref
  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR match_resource = ~B_ILM04~ resource = EVAL ~%spell_res%~   END      // change eff ref

COPY ~%folder%/spheres/spells/affliction/b_ILM04a.spl~ ~override/%spell_res%a.spl~ // Wave of Agony spla
  LPF ALTER_EFFECT INT_VAR match_opcode = 146  STR_VAR resource = EVAL ~%spell_res%B~   END      // spell ref
  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR match_resource = ~B_ILM04~ resource = EVAL ~%spell_res%~   END      // eff ref

COPY ~%folder%/spheres/spells/affliction/b_ILM04b.spl~ ~override/%spell_res%b.spl~ // etc.
  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR match_resource = ~B_ILM04~ resource = EVAL ~%spell_res%~   END      // eff ref

COPY ~%folder%/spheres/spells/affliction/b_ILM04.eff~ ~override/%spell_res%.eff~ //
  SAY 0x1c @51203 //Wracked in Agony
//Anything protect from pain?  Blood rage at least should
//bloodrage immunity list
INCLUDE ~%folder%/lib/spell_lists/blood_list.tpa~
//SR NWN spell deflection
OUTER_SET $aoe_spell(~CLERIC_WAVES_OF_AGONY~)=1



//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   Level 6  ///////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Assassin Vines____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ADD_SPELL ~%folder%/spheres/spells/plant/b_c601.spl~ 1 6 ~CLERIC_ASSASSIN_VINES~ //
        SAY NAME1 @51404
        SAY NAME2 @51404
        SAY UNIDENTIFIED_DESC @51405
	SAY DESC @51405
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_ASSASSIN_VINES~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324            // huge creature immune
      STR_VAR resource = EVAL ~%spell_res%~
  END      //

//ADD FREE ACTION PROTECTION
//_________________________________________________
//SR NWN spell deflection
OUTER_SET $aoe_spell(~CLERIC_ASSASSIN_VINES~)=1
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Summon Water Elemental____________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Projectile
//VVC
//cre
 COPY ~%folder%/spheres/spells/water/b_wele1.cre~ ~override~ // 12 HD elemental
        SAY NAME1 @51720
        SAY NAME2 @51720
 COPY ~%folder%/spheres/spells/water/b_wele2.cre~ ~override~ // 16 HD elemental
        SAY NAME1 @51720
        SAY NAME2 @51720
 COPY ~%folder%/spheres/spells/water/b_wele3.cre~ ~override~ // 24 HD (greater) elemental
        SAY NAME1 @51721
        SAY NAME2 @51721
//itm
 COPY ~%folder%/spheres/spells/water/b_wele1.itm~ ~override~ // Water Elemental fist
//bam
 COPY ~%folder%/spheres/spells/water/iwatere.bam~ ~override~ // fist bam
//animations -check SoD for cre animations...
 COPY ~%folder%/spheres/spells/water/anim~ ~override~ // water anims
//3d animation
//sounds   Copy sound #EFF_M08
//COPY ~%folder%/data/iwd_spells/wizard_2/TRA_18.WAV~ ~override~   //
//effs
 COPY ~%folder%/spheres/spells/water/B_PRWA1.eff~ ~override~ // Summon Water Elemental
 COPY ~%folder%/spheres/spells/water/B_PRWA2.eff~ ~override~ // Summon Water Elemental
 COPY ~%folder%/spheres/spells/water/B_PRWA3.eff~ ~override~ // Summon Water Elemental
//Spell itself
COPY_EXISTING ~SPPR605.spl~ ~override/b_pr602.spl~  // Start with C Fire Elemental
                  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR resource = ~B_PRWA1~ match_resource = ~SPFIR1P~  END //
                  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR resource = ~B_PRWA2~ match_resource = ~SPFIR2P~  END //
                  LPF ALTER_EFFECT INT_VAR match_opcode = 177  STR_VAR resource = ~B_PRWA3~ match_resource = ~SPFIR3P~  END //

ADD_SPELL ~override/b_pr602.spl~ 1 6 ~CLERIC_CONJURE_WATER_ELEMENTAL~ //
        SAY NAME1 @51701
        SAY NAME2 @51701
        SAY UNIDENTIFIED_DESC @51702
	SAY DESC @51702
//Now, other spell stuff...
//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_CONJURE_WATER_ELEMENTAL~
  RET spell_res
END

/* NEED TO CREATE UNIQUE SPELL ICON
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/charm/b_c201a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/charm/b_c201b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/charm/b_c201c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
*/

//Add scrolls to stores, etc...

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Nature's Wrath____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Projectile
//VVC
//bam
//animations
//3d animation
//cre
COPY ~%folder%/data/new_spells/priest_6/SMOUNDSU.cre~ ~override~   //adds resistances (which, apparently, are only in IWDEE???)
        SAY NAME1 @73700002
        SAY NAME2 @73700002
//sounds
COPY ~%folder%/spheres/spells/death/#EFF_P04.wav~ ~override~ //
//effs
//itm
COPY ~%folder%/data/new_spells/priest_6/B4-32M3.itm~ ~override~   //
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_free_action_arrays END
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_entangle_arrays END    //I've added at least one entry so far
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_slow_arrays END
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_hold_special_arrays END  //I have at least one hold spell that needs to be added...(maybe not this way)
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_hold_arrays END  //I have at least one hold spell that needs to be added...(maybe not this way)
    LPF cd_apply_batch STR_VAR array_name = cd_immunity_web_arrays END
//itm bam
COPY ~%folder%/data/new_spells/priest_6/ISHAPE07.BAM~ ~override~   //
//eff for text notification
COPY ~%folder%/data/new_spells/priest_6/B4-32M3.eff~ ~override~   //
  SAY 0x1c @73700003   //Entangled Notification
//Spell itself
ADD_SPELL ~%folder%/data/new_spells/priest_6/b_Pr601.spl~ 1 6 ~CLERIC_NATURES_WRATH~ //
        SAY NAME1 @51401
        SAY NAME2 @51401
        SAY UNIDENTIFIED_DESC @51402
	SAY DESC @51402

//to clear earlier versions of the spell
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_NATURES_WRATH~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF CLONE_EFFECT
      INT_VAR match_opcode = 172 STR_VAR match_resource = ~B_PR601~ resource = EVAL ~%spell_res%A~ END
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 172 STR_VAR match_resource = ~B_PR601~ resource = EVAL ~%spell_res%~ END
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 171 STR_VAR resource = EVAL ~%spell_res%A~ END
//Just in case
LPF cd_apply_batch STR_VAR array_name = cd_spell_transformation_arrays END

//add icons and projectile

/* NEED TO CREATE UNIQUE SPELL ICON
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_SPELL_HEADER INT_VAR STR_VAR icon = EVAL  ~%spell_res%B~ END
COPY ~%folder%/spheres/spells/charm/b_c201a.bam~ ~override/%spell_res%a.bam~
COPY ~%folder%/spheres/spells/charm/b_c201b.bam~ ~override/%spell_res%b.bam~
COPY ~%folder%/spheres/spells/charm/b_c201c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
*/
//cancel ability
COPY_EXISTING ~SPIN124.spl~ ~override/%spell_res%A.spl~
  LPF cd_apply_batch STR_VAR array_name = cd_spell_transformation_human_arrays END //
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END  //
  LPF ALTER_EFFECT INT_VAR match_opcode = 279 STR_VAR match_resource = ~SPWI491~ resource = EVAL ~~ END  //
  LPF ALTER_EFFECT INT_VAR match_opcode = 279 match_parameter2 = 7 STR_VAR resource = EVAL ~SPWI491~ END  //doesn't need to restore talk if disabled by some other effect
//Other polymorphy spells...
ACTION_IF FILE_EXISTS_IN_GAME ~spinhum.spl~ BEGIN
COPY_EXISTING ~spinhum.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%A~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spwi491.spl~ BEGIN
COPY_EXISTING ~spwi491.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%A~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spin122.spl~ BEGIN
COPY_EXISTING ~spin122.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%A~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spin123.spl~ BEGIN
COPY_EXISTING ~spin123.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%A~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~spin124.spl~ BEGIN
COPY_EXISTING ~spin124.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%A~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 172 multi_match = 1 STR_VAR resource = EVAL ~%spell_res%~ END
END
//finally, polymorph immunity (other possible created spells)
INCLUDE ~%folder%/lib/spell_lists/poly_list.tpa~

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////             ARCANE SPELLS               //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//May add a few, like stone fist