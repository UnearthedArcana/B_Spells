//SPELL IDEAS


//Global: Summon Spells (all): Allow creatures to follow characters into buildings and across maps.  Also, can set off traps.
//Global: Heal (already in progress)
//Global: Charm (no control; just stands there...)  Maybe not allowed during combat?
//Global: IWDEE style spells
//Global: BGEE style spells
//Global: Touch Spells Auto Hit
//Global: Touch Spells use Incremented Special Proficiency 
//         CODE: //LPF ADD_ITEM_EQEFFECT INT_VAR opcode = 233 target = 1 parameter1 = [x] parameter2 = (134 + (0x10000 * 1)) timing = 2 END
//Global: Summon Weapon Spells: Use normal Proficiency
//Global: Summon Weapon Spells: use Incremented Special Proficiency
//Global: Summon Monster Nat Weapons: Magical, etc.  Maybe extend to 'normal' creatures



//Individual Spells

//LEVEL 1 ARCANE

//Find Familiar: Can set off traps, and be cast by other than main character (IWD version?) Cantrip or innate

//Larloch's Minor Drain ???

//LEVEL 1 DIVINE

//LEVEL 2 ARCANE

//LEVEL 2 DIVINE

//Goodberry Recover Fatigue

//Favor of Ilmater (Name change: Divine Favor; castable by evil and on evil)

//Holy Word/Unholy word: Combine and make party friendly.  Change name to ...

//Mist of Eldath Name Change: Clensing Mist; Mass Cure at 5th level is 10 hp + 20% of max; Mist of Eldath at 7th level is 10 hp + 10% of max, plus dispel poison and disease and level drain and Sleep and Slow and Stun, every round for 5 rounds, for all allies in the AoE.

//Cure disease/Nut. poison/Remove Paralysis (combine these spells)

//Unholy Blight: Damages party enemies (evil don't care about hurting other evil)



//Dire Charm: Original spell makes target berserk

//template
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Spell Name________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Cleric/Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Ranger Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Shaman Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Bard Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Mage Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Sorcerer Only

////////////////////////////
//////NOTES:
////////////////////////////


//Subchange (if more than one)
///////////////////////////////////////////////////////////////////////
ACTION_IF (%b_var_revision_patch% > 0) BEGIN  //


///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


END //end this modification

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////             REVISED SPELLS               //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////             GLOBAL CHANGES              //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////
//////////// player modified variables
LAM b_spells_settings_rev_spells



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////                                        ///////////////////////////////////////////////
///////////////////////////////////////////////             SUMMON SPELLS              ///////////////////////////////////////////////
///////////////////////////////////////////////          (IMPROVED SUMMONS)            ///////////////////////////////////////////////
///////////////////////////////////////////////                                        ///////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////                                        ///////////////////////////////////////////////
///////////////////////////////////////////////             SUMMON SPELLS              ///////////////////////////////////////////////
///////////////////////////////////////////////          (CRE DESCRIPTIONS)            ///////////////////////////////////////////////
///////////////////////////////////////////////                                        ///////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//TO DO

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
///////////////////////////////                INDIVIDUAL SPELL CHANGES            /////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////               Arcane Spells             //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ACTION_IF (%b_rev_spells% = 1) OR (%b_rev_spells% = 2)  BEGIN  //At least arcane spell revisions

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////               CANTRIP STUFF             //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                1st level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Armor________________________________________________________________________________//
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////
//need to ensure that 1st level cantrips is Not installed TO DO CONTINUE

//Touch Range spell
///////////////////////////////////////////////////////////////////////
ACTION_IF (%armor_touch_patch% > 0) BEGIN  //


///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_ARMOR~
  RET spell_res
END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
     LPF ALTER_SPELL_HEADER 
       INT_VAR target = 1 range = 1
       STR_VAR /* icon = EVAL  ~%spell_res%B~ */
     END
 SPRINT old @10110031//old text
 SPRINT new @10110032//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


END //end armor modification

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Chill Touch_______________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////
//Need to check if code works in BG2, IWDEE and with SR TO DO CONTINUE
//Do increased damage progression
//do No Save


//Affect Undead
///////////////////////////////////////////////////////////////////////
ACTION_IF (%chill_affect_undead_patch% > 0) BEGIN  //

//all ref original spell
              LAF RES_NUM_OF_SPELL_NAME
                STR_VAR spell_name = ~WIZARD_CHILL_TOUCH~
                RET spell_res
              END

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
//if undead flee
ACTION_IF (%chill_affect_undead_patch% = 1) BEGIN  //
      ACTION_IF (!GAME_IS ~iwdee~) AND (!FILE_EXISTS_IN_GAME ~dvimhere.mrk~) THEN BEGIN    //Already exists in iwdee--but SR overwrites
              //fear spl
COPY ~%folder%/data/revised_spells/chill_touch/SPWI117C.spl~ ~override/%spell_res%C.spl~  //removes protection
COPY ~%folder%/data/revised_spells/chill_touch/SPWI117A.spl~ ~override/%spell_res%A.spl~  //applies horror
//now, let's modify the actual spell
   COPY_EXISTING_REGEXP GLOB ~%spell_res%.spl~ ~override~
     PATCH_IF (~%SOURCE_SIZE%~ > ~0x71~) BEGIN
            GET_OFFSET_ARRAY ab_array 0x64 4 0x68 2 0 0 0x28
            PHP_EACH ab_array AS int => ab_off BEGIN
               GET_OFFSET_ARRAY2 fx_array ab_off ITM_V10_HEAD_EFFECTS
               PHP_EACH fx_array AS int => fx_off BEGIN
                  READ_SHORT fx_off fx_type
                  READ_ASCII fx_off + 0x14 item
                  PATCH_IF fx_type = 111 BEGIN     // Create magic weap
                    //   PATCH_PRINT "%item%"  //test
                       INNER_PATCH_SAVE the_item ~%item%~ BEGIN  END
                       INNER_ACTION BEGIN
                            COPY_EXISTING ~%the_item%.ITM~ ~override~
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 177 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 STR_VAR resource = EVAL  ~%spell_res%A~ END
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 326 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 STR_VAR resource = EVAL  ~%spell_res%C~ END
                       END//inner action
                  END //opcode 111
                  PATCH_IF fx_type = 12 BEGIN     // Damage opcode
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 12 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 dicenumber = 0 dicesize = 0 STR_VAR resource = EVAL  ~%spell_res%A~ END
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 326 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 STR_VAR match_resource = EVAL  ~%spell_res%A~ resource = EVAL  ~%spell_res%C~ END
                  END //opcode 12
               END //php
            END//php
     END //source_size
//text notification
 COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @10110033//old text
 SPRINT new @10110034//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END
 COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @10110035//old text
 SPRINT new @10110036//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END

      END //end not SR and iwdee
END//end fear affect undead

//END  //end  undead     extra end????

//if hold undead
ACTION_IF (%chill_affect_undead_patch% = 2) BEGIN  //

  LAF RES_NUM_OF_SPELL_NAME
    STR_VAR spell_name = ~WIZARD_HOLD_UNDEAD~
    RET spell_res
  END
     COPY_EXISTING ~%spell_res%.spl~ ~override/B_HDED1.spl~   //the hold spell
        LPF ALTER_SPELL_HEADER INT_VAR projectile = 1 END
        LPF ALTER_EFFECT INT_VAR duration = 120 END  //Duration 2 turns

ACTION_IF (!GAME_IS ~iwdee~) OR (FILE_EXISTS_IN_GAME ~dvimhere.mrk~) THEN BEGIN //not iwdee
  LAF RES_NUM_OF_SPELL_NAME
    STR_VAR spell_name = ~WIZARD_CHILL_TOUCH~
    RET spell_res
  END
   COPY_EXISTING_REGEXP GLOB ~%spell_res%.spl~ ~override~
     PATCH_IF (~%SOURCE_SIZE%~ > ~0x71~) BEGIN
            GET_OFFSET_ARRAY ab_array 0x64 4 0x68 2 0 0 0x28
            PHP_EACH ab_array AS int => ab_off BEGIN
               GET_OFFSET_ARRAY2 fx_array ab_off ITM_V10_HEAD_EFFECTS
               PHP_EACH fx_array AS int => fx_off BEGIN
                  READ_SHORT fx_off fx_type
                  READ_ASCII fx_off + 0x14 item
                  PATCH_IF fx_type = 111 BEGIN     // Create magic weap
                    //   PATCH_PRINT "%item%"  //test
                       INNER_PATCH_SAVE the_item ~%item%~ BEGIN  END
                       INNER_ACTION BEGIN
		            ACTION_IF (!GAME_IS ~iwdee~)
                            COPY_EXISTING ~%the_item%.ITM~ ~override~
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 177 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 STR_VAR resource = ~B_HDED1~ END
			    END //end game is not iwdee
			    ACTION_IF (GAME_IS ~iwdee~)
                               LPF ALTER_EFFECT INT_VAR multi_match = 1 match_opcode = 326 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 STR_VAR match_resource = ~SPWI117A~ resource = ~B_HDED1~ END
			    END//end game is iwdee (replace fear w/hold)
                       END//inner action
                  END //type 111
                  PATCH_IF fx_type = 12 BEGIN     // Direct Damage
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 12 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 dicenumber = 0 dicesize = 0 STR_VAR resource = EVAL  ~%spell_res%A~ END
                                LPF CLONE_EFFECT INT_VAR multi_match = 1 match_opcode = 326 opcode = 326 timing = 1 parameter1 = 0 parameter2 = 1 savingthrow = 1 STR_VAR match_resource = EVAL  ~%spell_res%A~ resource = EVAL  ~%spell_res%C~ END
                  END //type 111
               END //php
            END//php
     END //source_size

//text notification
 COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @10110033//old text
 SPRINT new @10110037//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END
 COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @10110035//old text
 SPRINT new @10110038//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END
END//end not iwdee
ELSE BEGIN    //iwdee version
     COPY_EXISTING ~B_HDED1.spl~ ~override/SPWI117A.spl~   //the hold spell
     //k, that was easy.  Now, text:
  LAF RES_NUM_OF_SPELL_NAME
    STR_VAR spell_name = ~WIZARD_CHILL_TOUCH~
    RET spell_res
  END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
   SPRINT old @10110039//old text
   SPRINT new @10110040//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END

END  //end iwdee (w/o SR)

END //end Hold undead


////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////
//turn immunity?  
//protection from hold undead?  

////////////////////////////
//////Compatibility
////////////////////////////


END //end affect undead modification

//Consistent Damage
///////////////////////////////////////////////////////////////////////
ACTION_IF (%chill_con_dam_patch% > 0) BEGIN  //

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
  LAF RES_NUM_OF_SPELL_NAME
    STR_VAR spell_name = ~WIZARD_CHILL_TOUCH~
    RET spell_res
  END
   COPY_EXISTING_REGEXP GLOB ~%spell_res%.spl~ ~override~
     PATCH_IF (~%SOURCE_SIZE%~ > ~0x71~) BEGIN
            GET_OFFSET_ARRAY ab_array 0x64 4 0x68 2 0 0 0x28
            PHP_EACH ab_array AS int => ab_off BEGIN
               GET_OFFSET_ARRAY2 fx_array ab_off ITM_V10_HEAD_EFFECTS
               PHP_EACH fx_array AS int => fx_off BEGIN
                  READ_SHORT fx_off fx_type
                  READ_ASCII fx_off + 0x14 item
                  PATCH_IF fx_type = 111 BEGIN     // Create magic weap
                    //   PATCH_PRINT "%item%"  //test
                       INNER_PATCH_SAVE the_item ~%item%~ BEGIN  END
                       INNER_ACTION BEGIN
                            COPY_EXISTING ~%the_item%.ITM~ ~override~
                                ALTER_ITEM_EFFECT INT_VAR match_opcode = 12 dicesize = EVAL  ~%chill_con_dam_patch%~  END
                       END//inner action
                  END //type 111
                  PATCH_IF fx_type = 12 BEGIN     // Direct Damage
                                ALTER_ITEM_EFFECT INT_VAR match_opcode = 12 dicesize = EVAL  ~%chill_con_dam_patch%~  END
                  END //type 12
               END //php
            END//php
     END //source_size
   COPY_EXISTING ~%spell_res%.spl~ ~override~
   SPRINT old @10110041//old text
   SPRINT new @10110042//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END

////////////////////////////
//////Compatibility
////////////////////////////


END //end consistent damage

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Color Spray_________________________________________________________________________//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////
//////NOTES:
////////////////////////////
//Blind Immune: Not needed (at least in iwdee).  CHECK BG(2)EE (and will prob be needed in SR) CONTINUE


//Blind Immune
///////////////////////////////////////////////////////////////////////
ACTION_IF (%b_var_revision_patch% > 0) BEGIN  //


///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~WIZARD_COLOR_SPRAY~
  RET spell_res
END
   COPY_EXISTING ~%spell_res%.spl~ ~override~
 SPRINT old @10110033//old text
 SPRINT new @10110034//new text
     LPF TEXT_REPLACE
       STR_VAR orig_text = EVAL  ~%old%~  new_text = EVAL  ~%new%~
     END

/*
       LPF ADD_SPELL_EFFECT
           INT_VAR opcode = 324 parameter2 = 23 power = 1 timing = 0 duration = 1 insert_point = 0
           STR_VAR resource = EVAL  ~%spell_res%~
       END
*/
////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


END //end this modification


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//__________________________________________________________________Find Familliar______________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////

//Find Familliar --> Innate
///////////////////////////////////////////////////////////////////////
ACTION_IF (%b_ffam_revision_patch_innate% > 0) BEGIN  //



///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


END //end ffam innate patch

//FFam more than 1 familiar
///////////////////////////////////////////////////////////////////////
ACTION_IF (%b_ffam_revision_patch_multi% > 0) BEGIN  //

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


END //end ffam innate patch



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//________________________________________________________________Shocking Grasp________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Shocking Grasp ---> Jolt
///////////////////////////////////////////////////////////////////////
//TO DO CONTINUE  
//e.g.
ACTION_IF (%jolt_spell% = 4) OR ((%jolt_spell% > 0) AND (%b_cantrips% = 1) BEGIN  //

END


////////////////////////////
//////NOTES:
////////////////////////////

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////


///////////////////////////////////////////////////
//////// END ARCANE REVISION
END //end arcane revision changes Var

//NOW DIVINE

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////               Divine Spells             //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ACTION_IF (%b_rev_spells% = 1) OR (%b_rev_spells% = 3)  BEGIN  //At least divine spell revisions

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                ORISON STUFF             //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//SR Cause wounds spells summon a magic item that does the damage.  Account for this
//Make compatible with sphere (if installed after them)



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                1st level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                2nd level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                3rd level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//________________________________________________________________Hold Animal___________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only


//Hold Animal ---> change level
///////////////////////////////////////////////////////////////////////

////////////////////////////
//////NOTES:
////////////////////////////


///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

ACTION_IF (%hold_animal_lev% > 0) BEGIN  //

//use k4th's variant add spell to change level

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_HOLD_ANIMAL~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~backup/%folder%/workspace/B_HANIM.SPL~

LAF ADD_SPELL_EX INT_VAR type = 1 level = EVAL ~%hold_animal_lev%~  STR_VAR file = EVAL ~backup/%folder%/workspace/B_HANIM.SPL~ name = ~CLERIC_HOLD_ANIMAL~ RET DEST_FILE END
   COPY_EXISTING ~%DEST_FILE%~ ~override~
   LPF ALTER_SPELL_TYPE INT_VAR   spell_level = EVAL ~%hold_animal_lev%~ STR_VAR level_text = EVAL ~%hold_animal_lev%~ END
   
////////////////////////////
//////Compatibility
////////////////////////////
//NA(?)

END //End Hold Animal Level Change  




///////////////////////////////////////////////////
//////// END DIVINE REVISION
END //end divine revision changes Var


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//____________________________________________________________Spell Name________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Cleric/Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Paladin Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Druid/Ranger Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Ranger Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Shaman Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Bard Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Mage Only

//////////////////////////////////////////////////////////////////////
//////////////
//////////////  Sorcerer Only

//Subchange (if more than one)
///////////////////////////////////////////////////////////////////////


////////////////////////////
//////NOTES:
////////////////////////////

///////////////////////////////////////////////
//////Spell Basics: Pros, effs, bams, wavs, etc
///////////////////////////////////////////////

///////////////////////////////////////////////////
//////Spell Itself (and spell biz (e.g. sec spells)
///////////////////////////////////////////////////

////////////////////////////////
//////Add Icons and Projectiles:
////////////////////////////////

////////////////////////////
//////Portrait Icons:
////////////////////////////

////////////////////////////
//////Immunity/Prot Lists:
////////////////////////////

////////////////////////////
//////Scrolls: Creation
////////////////////////////

////////////////////////////
//////Scrolls: Placement
////////////////////////////

////////////////////////////
//////Compatibility
////////////////////////////









////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                2nd level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_________________________________________________________________Goodberry____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Recovers fatigue
//Notes: SR ADDSPELLS AS  CLERIC_GOOD_BERRIES
//vanilla internal name:  CLERIC_GOOD_BERRIES (in BG(2)EE but in IWDEE It's CLERIC_GOODBERRY)
 //Goodberry items
 COPY_EXISTING ~gberry.itm~ ~override~
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110005//old text
  SPRINT new @10110006//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  // descriptions for SR
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY1.itm~ BEGIN
  COPY_EXISTING ~GBERRY1.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY2.itm~ BEGIN
  COPY_EXISTING ~GBERRY2.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY3.itm~ BEGIN
  COPY_EXISTING ~GBERRY3.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY4.itm~ BEGIN
  COPY_EXISTING ~GBERRY4.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY5.itm~ BEGIN
  COPY_EXISTING ~GBERRY5.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

ACTION_IF FILE_EXISTS_IN_GAME ~GBERRY6.itm~ BEGIN
  COPY_EXISTING ~GBERRY6.itm~ ~override~ //to make unselectable
   LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 93 parameter1 = 0 parameter2 = 1 END
  SPRINT old @10110007//old text
  SPRINT new @10110008//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
END

//IF SR installed
ACTION_IF FILE_EXISTS_IN_GAME ~dvimhere.mrk~ BEGIN
  COPY_EXISTING ~SPPR118.spl~ ~override/SPPR207.spl~   //Copies SR version over original
  COPY_EXISTING ~SPPR118.spl~ ~override~ //to make unselectable
    WRITE_BYTE 0x21 (THIS | 0b11000000) //actually make unselectable
END//End if SR installed

//Spell description alteration
 COPY_EXISTING ~SPPR207.spl~ ~override~
     WRITE_LONG 0x34 ~2~ // level 2
  SPRINT old @10110009//old text
  SPRINT new @10110010//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
   
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                3rd level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/* I need to rethink this
//Cure Disease --> Cure Affliction

 COPY_EXISTING ~SPPR317.spl~ ~override~
        SAY NAME1 @10110014
        SAY NAME2 @10110014
  LPF ALTER_SPELL_HEADER INT_VAR range = 150
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 46 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 162 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 163 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 240 parameter2 = 55 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 240 parameter2 = 13 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
 SPRINT old @10110015//old text
 SPRINT new @10110014//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
 SPRINT old @10110016//old text
 SPRINT new @10110017//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
 SPRINT old @10110018//old text
 SPRINT new @10110019//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
*/


//CONTINUE FROM HERE

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
/////////////////////////////////////                4th level                //////////////////////////////////////
/////////////////////////////////////                                         //////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//Unfailing Endurance --> Remove Fatigue
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_______________________________________________________Remove Fatigue_________________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ADD_SPELL ~Spells/data/revised_spells/unfailing_endurance/b_p101.spl~ 1 1 ~CLERIC_REMOVE_FATIGUE~ //
        SAY NAME1 @10100000
        SAY NAME2 @10100000
        SAY UNIDENTIFIED_DESC @10100001
	SAY DESC @10100001
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_REMOVE_FATIGUE~
  RET spell_res
END
//icons
COPY ~Spells/data/revised_spells/unfailing_endurance/SPPR424a.bam~ ~override/%spell_res%a.bam~
COPY ~Spells/data/revised_spells/unfailing_endurance/SPPR424b.bam~ ~override/%spell_res%b.bam~
COPY ~Spells/data/revised_spells/unfailing_endurance/SPPR424c.bam~ ~override/%spell_res%c.bam~
//add bams to spl
COPY_EXISTING ~%spell_res%.spl~ ~override~
  WRITE_EVALUATED_ASCII 0x003a ~%spell_res%C~
  WRITE_EVALUATED_ASCII 0x0076 ~%spell_res%B~


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//_______________________________________________________Unfailing Endurance____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ACTION_IF FILE_EXISTS_IN_GAME ~b_IWD.itm~ BEGIN
//should be able to use exact same code for iwdee and iwdification
//spec ability
COPY ~Spells/data/revised_spells/unfailing_endurance/b_fatig.spl~ ~override~
        SAY NAME1 @10100000
        SAY NAME2 @10100000
        SAY UNIDENTIFIED_DESC @10100004
	SAY DESC @10100004
//heal notification
COPY ~Spells/data/revised_spells/unfailing_endurance/B_HEALN.eff~ ~override~
  SAY 0x1c ~Healed~ //healed (already in dialog.tlk so...)
//animation
COPY ~Spells/data/revised_spells/unfailing_endurance/ENCHAH.bam~ ~override~

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_UNFAILING_ENDURANCE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
        SAY NAME1 @10100002
        SAY NAME2 @10100002
        SAY UNIDENTIFIED_DESC @10100003
	SAY DESC @10100003
	WRITE_BYTE 0x072 ~2~  //Projectile
	WRITE_BYTE 0x07E ~5~  //Self
	WRITE_SHORT 0x098 ~158~  //DH Projectile
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 324 parameter1 = 0 parameter2 = 1 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 321 parameter1 = 0 parameter2 = 0 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 17 parameter1 = 25 parameter2 = 2 END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 171 timing = 0 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 172 timing = 4 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 177 parameter1 = 0 parameter2 = 2 STR_VAR resource = EVAL ~b_healn~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = EVAL ~ENCHAH~  END
END  //End 'my version'

//IWDEE

ACTION_IF GAME_IS ~iwdee~ THEN BEGIN   //
//should be able to use exact same code for iwdee and iwdification
//spec ability
COPY ~Spells/data/revised_spells/unfailing_endurance/b_fatig.spl~ ~override~
        SAY NAME1 @10100000
        SAY NAME2 @10100000
        SAY UNIDENTIFIED_DESC @10100004
	SAY DESC @10100004
//heal notification
COPY ~Spells/data/revised_spells/unfailing_endurance/B_HEALN.eff~ ~override~
  SAY 0x1c ~Healed~ //healed (already in dialog.tlk so...)

//animation
COPY ~Spells/data/revised_spells/unfailing_endurance/ENCHAH.bam~ ~override~

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_UNFAILING_ENDURANCE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
        SAY NAME1 @10100002
        SAY NAME2 @10100002
        SAY UNIDENTIFIED_DESC @10100003
	SAY DESC @10100003
	WRITE_BYTE 0x072 ~2~  //Projectile
	WRITE_BYTE 0x07E ~5~  //Self
	WRITE_SHORT 0x098 ~158~  //DH Projectile
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 324 parameter1 = 0 parameter2 = 1 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 321 parameter1 = 0 parameter2 = 0 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 17 parameter1 = 25 parameter2 = 2 END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 171 timing = 0 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 172 timing = 4 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 177 parameter1 = 0 parameter2 = 2 STR_VAR resource = EVAL ~b_healn~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = EVAL ~ENCHAH~  END
END
//End iwdee version
//IWDIfication
ACTION_IF MOD_IS_INSTALLED ~SETUP-IWDIFICATION.TP2~ ~40~ THEN BEGIN//should be able to use exact same code for iwdee and iwdification
//spec ability
COPY ~Spells/data/revised_spells/unfailing_endurance/b_fatig.spl~ ~override~
        SAY NAME1 @10100000
        SAY NAME2 @10100000
        SAY UNIDENTIFIED_DESC @10100004
	SAY DESC @10100004
//heal notification
COPY ~Spells/data/revised_spells/unfailing_endurance/B_HEALN.eff~ ~override~
  SAY 0x1c ~Healed~ //healed (already in dialog.tlk so...)

//animation
COPY ~Spells/data/revised_spells/unfailing_endurance/ENCHAH.bam~ ~override~

LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_UNFAILING_ENDURANCE~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
        SAY NAME1 @10100002
        SAY NAME2 @10100002
        SAY UNIDENTIFIED_DESC @10100003
	SAY DESC @10100003
	WRITE_BYTE 0x072 ~2~  //Projectile
	WRITE_BYTE 0x07E ~5~  //Self
	WRITE_SHORT 0x098 ~158~  //DH Projectile
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 324 parameter1 = 0 parameter2 = 1 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 321 parameter1 = 0 parameter2 = 0 STR_VAR resource = EVAL ~%spell_res%~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 17 parameter1 = 25 parameter2 = 2 END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 171 timing = 0 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 172 timing = 4 parameter1 = 0 parameter2 = 0 duration = 2400 STR_VAR resource = EVAL ~b_fatig~  END
  LPF CLONE_EFFECT INT_VAR match_opcode = 93 opcode = 177 parameter1 = 0 parameter2 = 2 STR_VAR resource = EVAL ~b_healn~ END
  LPF ALTER_EFFECT INT_VAR match_opcode = 215 STR_VAR resource = EVAL ~ENCHAH~  END
END

//ATTENTION: FIT REMOVE FATIGUE AND UNFAILING ENDURANCE IN SPHERE SYSTEM...
//ALSO, MAYBE REMOVE FATIGUE SHOULD HEAL A BIT???

//Neutralize Poison --> Cure Affliction
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//___________________________________________________________Cure Affliction____________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 COPY_EXISTING ~SPPR404.spl~ ~override~
        SAY NAME1 @10110014
        SAY NAME2 @10110014
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 46 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 162 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 163 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 240 parameter2 = 55 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF CLONE_EFFECT INT_VAR match_opcode = 79 opcode = 240 parameter2 = 13 STR_VAR  END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
 SPRINT old @10110015//old text
 SPRINT new @10110014//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
 SPRINT old @10110016//old text
 SPRINT new @10110017//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //



//Mist of Eldath --> Cleansing Mist

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//______________________________________________________________Cleansing Mist__________________________________________________________________________//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//First, check if spell is installed...  with an action_if (to do)

//Lasts over 5 rounds, continually healing non-enemies
ADD_PROJECTILE ~Spells/data/revised_spells/Mist_of_Eldath/B_MIST.pro~   //pro
//Add projectile to spl, etc.
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_MIST_OF_ELDATH~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~  //change description
        SAY NAME1 @10110020
        SAY NAME2 @10110020
 SPRINT old @10110021//old text
 SPRINT new @10110020//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
 SPRINT old @10110022//old text
 SPRINT new @10110023//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
 SPRINT old @10110024//old text
 SPRINT new @10110025//new text
   READ_LONG 0x50 "valid"
   PATCH_IF (%valid% >= 0) BEGIN // verify desc is valid
   READ_STRREF 0x50 ~desc~
	INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
	REPLACE_TEXTUALLY ~%old%~ ~%new%~        //replacing old w new
	END
   SAY_EVALUATED 0x50 ~%new_desc%~
   END  //
  LPF CLONE_EFFECT INT_VAR match_opcode = 17 opcode = 324 parameter1 = 0 parameter2 = 50 timing = 0 duration = 1 dicenumber = 0 dicesize = 0 STR_VAR resource = EVAL ~%spell_res%~ END   //parameter1 = 0 parameter2 = 0 resource = EVAL ~%spell_res%~
  LPF ALTER_SPELL_HEADER INT_VAR projectile = %B_MIST% STR_VAR  END

/*opcode = 177
target = 2
power = 0
timing = 4
parameter1 = 5
parameter2 = 160
power = 0
resist_dispel = 2
duration = 1
probability1 = 100
probability2 = 0
dicenumber = 0
dicesize = 0
savingthrow = 0
savebonus = 0
header =
insert_point = 7
resource = POOL1a10   */

/*

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////DESTRUCTION///////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//Smite_____________________________________________________________________________
ADD_SPELL ~Spells/spheres/spells/Destruction/b_pr101.spl~ 1 1 ~CLERIC_SMITE~
	SAY NAME1 @50401
	SAY NAME2 @50401
	SAY UNIDENTIFIED_DESC @50402
	SAY DESC @50402
COPY ~Spells/spheres/spells/Destruction/b_pr101.eff~ ~override~     //
COPY ~Spells/spheres/spells/Destruction/SPUNHOLY.bam~ ~override~     //
COPY ~Spells/spheres/spells/Destruction/EFF_E01.WAV~ ~override~     //

//Shatter__________________________________________________________________________________
//icons
COPY ~Spells/spheres/spells/Destruction/b_c204b.bam~ ~override~  // Shatter
COPY ~Spells/spheres/spells/Destruction/b_c204c.bam~ ~override~  // Shatter
//spell etc
ADD_SPELL ~Spells/spheres/spells/Destruction/b_pr201.spl~ 1 2 ~CLERIC_SHATTER~ //Curse Spell
        SAY NAME1 @50408
        SAY NAME2 @50408
        SAY UNIDENTIFIED_DESC @50409
	SAY DESC @50409
COPY ~Spells/spheres/spells/Destruction/b_pr201A.spl~ ~override~ // Shatter 2nd
COPY ~Spells/spheres/spells/Destruction/b_pr201B.spl~ ~override~ // Shatter   3rd
COPY ~Spells/spheres/spells/Destruction/b_pr201A.eff~ ~override~ // Shatter  x dam golem
COPY ~Spells/spheres/spells/Destruction/b_pr201B.eff~ ~override~ // Shatter  cast 2
COPY ~Spells/spheres/spells/Destruction/b_pr201C.eff~ ~override~ // Shatter  x dam
COPY ~Spells/spheres/spells/Destruction/b_pr201D.eff~ ~override~ // Shatter  cast 3
COPY ~Spells/spheres/spells/Destruction/EFF_E01.WAV~ ~override~     //

//Need to copy all elementals, and change their type to monster
COPY_EXISTING_REGEXP GLOB ~.*\.cre~ ~override~ //copies all cre files
	PATCH_IF (~%SOURCE_SIZE%~ > ~0x71~) BEGIN
		READ_BYTE ~0x272~ ~type~ //reads the byte containing cre type
		PATCH_IF (~%type%~ = ~145~) BEGIN
	          WRITE_SHORT 0x271 255
	          WRITE_BYTE  0x272 145   //I have no idea why I need to do this...
                END
         END
BUT_ONLY_IF_IT_CHANGES


//Shout__________________________________________________________________________________
ADD_PROJECTILE ~Spells/spheres/spells/Destruction/b_sht01.pro~   //projectile
COPY ~Spells/spheres/spells/Destruction/SHOUTT.bam~ ~override~     //
COPY ~Spells/spheres/spells/Destruction/#FF_M101.WAV~ ~override~     //
ADD_SPELL ~Spells/spheres/spells/Destruction/b_pr402.spl~ 1 4 ~CLERIC_SHOUT~ //
        SAY NAME1 @50405
        SAY NAME2 @50405
        SAY UNIDENTIFIED_DESC @50406
	SAY DESC @50406
	WRITE_SHORT 0x098 ~%b_sht01%~  //Projectile

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
//////////////////////// AFFLICTION //////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//Waves of Agony__________________________________________________________________________________
ADD_SPELL ~Spells/spheres/spells/affliction/b_Pr501.spl~ 1 5 ~CLERIC_WAVES_OF_AGONY~ //
        SAY NAME1 @51201
        SAY NAME2 @51201
        SAY UNIDENTIFIED_DESC @51202
	SAY DESC @51202
COPY ~Spells/spheres/spells/affliction/b_ILM04a.spl~ ~override~ // Wave of Agony spla
COPY ~Spells/spheres/spells/affliction/b_ILM04b.spl~ ~override~ // etc.
COPY ~Spells/spheres/spells/affliction/b_ILM04.eff~ ~override~ //
  SAY 0x1c @51203 //Wracked in Agony
COPY ~Spells/spheres/spells/affliction/EFF_E05.WAV~ ~override~ //

//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
////////////////////////            //////////////////////////
////////////////////////   PLANT    //////////////////////////
////////////////////////            //////////////////////////
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

//Nature's Wrath_________________________________________________________________
ADD_SPELL ~Spells/spheres/spells/plant/b_Pr601.spl~ 1 6 ~CLERIC_NATURES_WRATH~ //
        SAY NAME1 @51401
        SAY NAME2 @51401
        SAY UNIDENTIFIED_DESC @51402
	SAY DESC @51402
 COPY ~Spells/spheres/spells/plant/SHMBLR.ITM~ ~override~ //
 COPY ~Spells/spheres/spells/plant/SISHAPE06.bam~ ~override~ //  
LAF RES_NUM_OF_SPELL_NAME
  STR_VAR spell_name = ~CLERIC_NATURES_WRATH~
  RET spell_res
END
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 321            //
      STR_VAR resource = EVAL ~%spell_res%~
  END      //
COPY_EXISTING ~%spell_res%.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 321 STR_VAR resource = EVAL ~B_FO601~ END
 
//CONTINUE HERE

//Assassin Vines_________________________________________________
ACTION_IF GAME_IS ~bgee sod bg2ee eet iwdee~ THEN BEGIN    //Not sure why, but I originally limited this to IWDEE TEST!
 COPY ~Spells/spheres/spells/plant/b_c601.spl~ ~override~ //Assassin Vines
        SAY NAME1 @51404
        SAY NAME2 @51404
        SAY UNIDENTIFIED_DESC @51405
	SAY DESC @51405
 COPY_EXISTING ~d5phpla6.spl~ ~override~
    LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c601~ END

COPY_EXISTING ~b_c601.spl~ ~override/b_Fo602.spl~ // Assassin Vines-FOCUS
        SAY UNIDENTIFIED_DESC @51406
	SAY DESC @51406
  WRITE_LONG 0x34 5
COPY_EXISTING ~d5ffpla6.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo602~ END
BUT_ONLY
END

//Stone Fist__________________________________________________________________________________
//EARTH
//icons
COPY ~Spells/spheres/spells/earth/b_c303b.bam~ ~override~ // Stone Fist
COPY ~Spells/spheres/spells/earth/b_c303c.bam~ ~override~ // Stone Fist
//spell etc
COPY ~Spells/spheres/spells/earth/b_pr301.spl~ ~override~ // Stone Fist
        SAY NAME1 @51501
        SAY NAME2 @51501
        SAY UNIDENTIFIED_DESC @51503
	SAY DESC @51503
COPY ~Spells/spheres/spells/earth/b_pr301.itm~ ~override~ // Actual Fist
        SAY NAME1 @51501
        SAY NAME2 @51501
        SAY UNIDENTIFIED_DESC @51504
	SAY DESC @51504
 COPY_EXISTING ~d5phear3.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_pr301~ END
 BUT_ONLY
//END
COPY ~Spells/spheres/spells/earth/b_pr301.spl~ ~override/b_Fo301.spl~ // Stone Fist-FOCUS
        SAY NAME1 @51501
        SAY NAME2 @51501
        SAY UNIDENTIFIED_DESC @51503
	SAY DESC @51503
  WRITE_LONG 0x34 2
COPY_EXISTING ~d5ffear3.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo301~ END
BUT_ONLY

//WATER
//Summon Water Elemental______________________________________________________________________
ACTION_IF GAME_IS ~iwdee~ THEN BEGIN    //IWDEE only animation
 COPY ~Spells/spheres/spells/water/b_Pr602.spl~ ~override~ // Summon Water Elemental
        SAY NAME1 @51701
        SAY NAME2 @51701
        SAY UNIDENTIFIED_DESC @51702
	SAY DESC @51702
 COPY ~Spells/spheres/spells/water/B_PRWA1.eff~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/B_PRWA2.eff~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/b_wele1.itm~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/b_gensu.itm~ ~override~ // Summon Water Elemental
 COPY_EXISTING ~cywatere.cre~ ~override/b_wele1.cre~
  WRITE_BYTE 0x270 4  //Ally
  ADD_CRE_ITEM ~b_gensu~ #0 #0 #0 ~IDENTIFIED~ ~amulet~ //Gender to summoned
  ADD_CRE_ITEM ~b_wele1~ #0 #0 #0 ~IDENTIFIED~ ~weapon1~ EQUIP//Adds weapon
 COPY ~Spells/spheres/spells/water/b_wele2.itm~ ~override~ // Summon Water Elemental
 COPY_EXISTING ~cywatere.cre~ ~override/b_wele2.cre~
  WRITE_BYTE 0x270 4  //Ally
  WRITE_BYTE 0x234 16  //Level
  WRITE_BYTE 0x238 22  //Strength
  WRITE_BYTE 0x23c 15  //Dex
  WRITE_BYTE 0x23d 16  //COn
  WRITE_BYTE 0x52 3  //THAC0
  WRITE_BYTE 0x54 3  //death
  WRITE_BYTE 0x55 5  //Wands
  WRITE_BYTE 0x56 4  //Poly
  WRITE_BYTE 0x57 3  //Breath
  WRITE_BYTE 0x58 6  //Spell
  WRITE_SHORT 0x24 168 //
  WRITE_SHORT 0x26 168 // Current and max hp
  ADD_CRE_ITEM ~b_wele2~ #0 #0 #0 ~IDENTIFIED~ ~weapon1~ EQUIP//Adds weapon
  ADD_CRE_ITEM ~b_gensu~ #0 #0 #0 ~IDENTIFIED~ ~amulet~ //Gender to summoned
 COPY_EXISTING ~d5phwat6.spl~ ~override~
    LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Pr602~ END
 BUT_ONLY
 COPY_EXISTING ~b_Pr602.spl~ ~override/b_Fo602.spl~ // Conjure Water-FOCUS
        SAY UNIDENTIFIED_DESC @51703
	SAY DESC @51703
  WRITE_LONG 0x34 5
 COPY_EXISTING ~d5ffwat6.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo602~ END
 BUT_ONLY
END

ACTION_IF GAME_IS ~bg2ee eet~ THEN BEGIN    //BG2EE only creature
 COPY ~Spells/spheres/spells/water/b_Pr602.spl~ ~override~ // Summon Water Elemental
        SAY NAME1 @51701
        SAY NAME2 @51701
        SAY UNIDENTIFIED_DESC @51702
	SAY DESC @51702
 COPY ~Spells/spheres/spells/water/B_PRWA1.eff~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/B_PRWA2.eff~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/b_wele1.itm~ ~override~ // Summon Water Elemental
 COPY ~Spells/spheres/spells/water/b_gensu.itm~ ~override~ // Summon Water Elemental
 COPY_EXISTING ~elwatg01.cre~ ~override/b_wele1.cre~
  WRITE_BYTE 0x270 4  //Ally
  ADD_CRE_ITEM ~b_gensu~ #0 #0 #0 ~IDENTIFIED~ ~amulet~ //Gender to summoned
  ADD_CRE_ITEM ~b_wele1~ #0 #0 #0 ~IDENTIFIED~ ~weapon1~ EQUIP//Adds weapon
 COPY ~Spells/spheres/spells/water/b_wele2.itm~ ~override~ // Summon Water Elemental
 COPY_EXISTING ~elwatg01.cre~ ~override/b_wele2.cre~
  WRITE_BYTE 0x270 4  //Ally
  WRITE_BYTE 0x234 16  //Level
  WRITE_BYTE 0x238 22  //Strength
  WRITE_BYTE 0x23c 15  //Dex
  WRITE_BYTE 0x23d 16  //COn
  WRITE_BYTE 0x52 3  //THAC0
  WRITE_BYTE 0x54 3  //death
  WRITE_BYTE 0x55 5  //Wands
  WRITE_BYTE 0x56 4  //Poly
  WRITE_BYTE 0x57 3  //Breath
  WRITE_BYTE 0x58 6  //Spell
  WRITE_SHORT 0x24 168 //
  WRITE_SHORT 0x26 168 // Current and max hp
  ADD_CRE_ITEM ~b_wele2~ #0 #0 #0 ~IDENTIFIED~ ~weapon1~ EQUIP//Adds weapon
  ADD_CRE_ITEM ~b_gensu~ #0 #0 #0 ~IDENTIFIED~ ~amulet~ //Gender to summoned
 COPY_EXISTING ~d5phwat6.spl~ ~override~
    LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Pr602~ END
 BUT_ONLY
 COPY_EXISTING ~b_Pr602.spl~ ~override/b_Fo602.spl~ // Conjure Water-FOCUS
  SAY UNIDENTIFIED_DESC @51703
  WRITE_LONG 0x34 5
 COPY_EXISTING ~d5ffwat6.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo602~ END
 BUT_ONLY
END

//Ice Blade_________________________________________________________
ACTION_IF GAME_IS ~bgee sod bg2ee eet iwdee~ THEN BEGIN    //Not sure why, but I originally limited these spells to IWDEE TEST!
//Icons
COPY ~Spells/spheres/spells/water/b_c203b.bam~ ~override~   //bam
COPY ~Spells/spheres/spells/water/b_c203c.bam~ ~override~   //bam
//blades
COPY ~Spells/spheres/spells/water/moonbla.bam~ ~override~   //bam
COPY ~Spells/spheres/spells/water/b_iceb1.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51710
	SAY DESC @51710
COPY ~Spells/spheres/spells/water/b_iceb2.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51711
	SAY DESC @51711
COPY ~Spells/spheres/spells/water/b_iceb3.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51712
	SAY DESC @51712
COPY ~Spells/spheres/spells/water/b_iceb4.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51713
	SAY DESC @51713
COPY ~Spells/spheres/spells/water/b_iceb5.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51714
	SAY DESC @51714
COPY ~Spells/spheres/spells/water/b_iceb6.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51715
	SAY DESC @51715
COPY ~Spells/spheres/spells/water/b_iceb7.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51716
	SAY DESC @51716
COPY ~Spells/spheres/spells/water/b_iceb8.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51717
	SAY DESC @51717
COPY ~Spells/spheres/spells/water/b_iceb9.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51718
	SAY DESC @51718
COPY ~Spells/spheres/spells/water/b_iceb10.itm~ ~override~   //blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51719
	SAY DESC @51719
COPY ~Spells/spheres/spells/water/b_c203.spl~ ~override~ // Ice Blade
        SAY NAME1 @51704
        SAY NAME2 @51704
        SAY UNIDENTIFIED_DESC @51705
	SAY DESC @51705
 COPY_EXISTING ~d5phwat2.spl~ ~override~
    LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c203~ END
 BUT_ONLY
 COPY_EXISTING ~b_c203.spl~ ~override/b_Fo202.spl~ // Ice Blade-FOCUS
  SAY UNIDENTIFIED_DESC @51705
  WRITE_LONG 0x34 1
 COPY_EXISTING ~d5ffwat2.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo202~ END
 BUT_ONLY

//Frost Fingers____________________________________________________________
//icons
COPY ~Spells/spheres/spells/water/b_c103b.bam~ ~override~ // Frost Fingers
COPY ~Spells/spheres/spells/water/b_c103c.bam~ ~override~ // Frost Fingers
//spell etc
ADD_PROJECTILE ~Spells/spheres/spells/water/b_c103.pro~
COPY ~Spells/spheres/spells/water/b_c103.spl~ ~override~ // Frost Fingers
        SAY NAME1 @51707
        SAY NAME2 @51707
        SAY UNIDENTIFIED_DESC @51708
	SAY DESC @51708
	WRITE_SHORT 0x098 ~%b_c103%~
 COPY_EXISTING ~d5phwat1.spl~ ~override~
    LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c103~ END
 BUT_ONLY
 COPY_EXISTING ~b_c103.spl~ ~override/b_Fo101.spl~ // Ice Blade-FOCUS
        SAY UNIDENTIFIED_DESC @51709
	SAY DESC @51709
  WRITE_LONG 0x34 1
 COPY_EXISTING ~d5ffwat1.spl~ ~override~
         LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_Fo101~ END
 BUT_ONLY

END

//__________________________________________________________________________________

//SHADOW

//Cloak of Darkness_________________________________________________________
//icons
COPY ~Spells/spheres/spells/shadow/b_c302b.bam~ ~override~ // Cloak of Darkness
COPY ~Spells/spheres/spells/shadow/b_c302c.bam~ ~override~ // Cloak of Darkness
//spell etc
COPY ~Spells/spheres/spells/shadow/b_c302.spl~ ~override~ // Cloak of Darkness
        SAY NAME1 @52003
        SAY NAME2 @52003
        SAY UNIDENTIFIED_DESC @52004
	SAY DESC @52004
	COPY_EXISTING ~d5phsha3.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c302~ END // cloak of darkness
	COPY_EXISTING ~b_c302.spl~ ~override/b_fo302.spl~
        SAY UNIDENTIFIED_DESC @52005
	SAY DESC @52005
           WRITE_LONG 0x34 2
	COPY_EXISTING ~d5ffsha3.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_fo302~ END // focus cloak of darkness
	BUT_ONLY

//special case: shadowstep__________________________________________________________
//
ACTION_IF NOT FILE_EXISTS_IN_GAME ~spsd02.spl~ BEGIN
	COPY ~Spells/spheres/spells/shadow/spsd02.spl~ ~override~ // Shadowstep
        SAY NAME1 @52001
        SAY NAME2 @52001
        SAY UNIDENTIFIED_DESC @52002
	SAY DESC @52002
END
ACTION_IF FILE_EXISTS_IN_GAME ~spsd02.spl~ BEGIN
	COPY_EXISTING ~d5phsha5.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~spsd02~ END // skeleton warrior
	COPY_EXISTING ~spsd02.spl~ ~override/d5fosd02.spl~
        WRITE_LONG 0x34 4
	COPY_EXISTING ~d5ffsha5.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~d5fosd02~ END // skeleton warrior
	BUT_ONLY
END


//__________________________________________________________________________________

//CHARM/THOUGHT
//Forbiddance___________________________________________________________________
ACTION_IF GAME_IS ~bgee sod bg2ee eet iwdee~ THEN BEGIN    //originally made iwdee only test
//icons
COPY ~Spells/spheres/spells/charm/b_c201b.bam~ ~override~ // Forbiddance
COPY ~Spells/spheres/spells/charm/b_c201c.bam~ ~override~ // Forbiddance
//spell etc
COPY ~Spells/spheres/spells/charm/b_c201.spl~ ~override~ // Forbiddance
        SAY NAME1 @50800
        SAY NAME2 @50800
        SAY UNIDENTIFIED_DESC @50801
	SAY DESC @50801
	COPY_EXISTING ~d5phtho2.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c201~ END // Forbiddance
	COPY_EXISTING ~b_c201.spl~ ~override/b_fo203.spl~
        SAY UNIDENTIFIED_DESC @50802
	SAY DESC @50802
           WRITE_LONG 0x34 1
             LPF ALTER_EFFECT
              INT_VAR match_opcode = 324
              STR_VAR resource = EVAL ~b_fo203~
             END
	COPY_EXISTING ~d5fftho2.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_fo203~ END // focus Forbiddance
	BUT_ONLY

//Murderous Command_____________________________________________________________
//icons
COPY ~Spells/spheres/spells/charm/b_c301b.bam~ ~override~ // Murderous Command
COPY ~Spells/spheres/spells/charm/b_c301c.bam~ ~override~ // Murderous Command
//spell etc
COPY ~Spells/spheres/spells/charm/b_c301.spl~ ~override~ // Murderous Command
        SAY NAME1 @50803
        SAY NAME2 @50803
        SAY UNIDENTIFIED_DESC @50804
	SAY DESC @50804

COPY_EXISTING ~d5phtho3.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c301~ END // Murderous Command

COPY_EXISTING ~b_c301.spl~ ~override/b_f301.spl~
        SAY UNIDENTIFIED_DESC @50805
	SAY DESC @50805
           WRITE_LONG 0x34 2
             LPF ALTER_EFFECT
              INT_VAR match_opcode = 324
              STR_VAR resource = EVAL ~b_f301~
             END
COPY_EXISTING ~d5fftho3.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f301~ END // focus Murderous Command
	BUT_ONLY
END
//end ee only
//__________________________________________________________________________________

//DEATH

//Pacify the Dead______________________________________________________________
//icons
COPY ~Spells/spheres/spells/death/b_c202b.bam~ ~override~ // Pacify the Dead
COPY ~Spells/spheres/spells/death/b_c202c.bam~ ~override~ // Pacify the Dead
//spells etc
COPY ~Spells/spheres/spells/death/b_c202.spl~ ~override~ // Pacify the Dead
        SAY NAME1 @50301
        SAY NAME2 @50301
        SAY UNIDENTIFIED_DESC @50302
	SAY DESC @50302
  LPF ALTER_EFFECT
      INT_VAR match_opcode = 324
      parameter1 = 0
      parameter2 = 2
      STR_VAR resource = EVAL ~b_c202~
     END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
COPY_EXISTING ~d5phdea2.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c202~ END // Murderous Command
COPY_EXISTING ~b_c202.spl~ ~override/b_f201.spl~
        SAY UNIDENTIFIED_DESC @50303
	SAY DESC @50303
           WRITE_LONG 0x34 1
COPY_EXISTING ~d5ffdea2.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f201~ END // Murderous Command
//add removal
ACTION_IF FILE_EXISTS_IN_GAME ~.spl~ BEGIN
 COPY_EXISTING ~spwi312.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~.spl~ BEGIN
 COPY_EXISTING ~spwish25.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~.spl~ BEGIN
 COPY_EXISTING ~spin146.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~.spl~ BEGIN
 COPY_EXISTING ~spin977.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END
ACTION_IF FILE_EXISTS_IN_GAME ~.spl~ BEGIN
 COPY_EXISTING ~spwm164.spl~ ~override~
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_c202~ END
  LPF CLONE_EFFECT INT_VAR match_opcode = 40 opcode = 321 parameter1 = 0 parameter2 = 0 timing = 0 STR_VAR resource = EVAL ~b_f201~ END
END

  //Eyes of the Dead_________________________________________________________
//Icons
COPY ~Spells/spheres/spells/death/b_c104b.bam~ ~override~ //
COPY ~Spells/spheres/spells/death/b_c104c.bam~ ~override~ //
//spell etc
COPY ~Spells/spheres/spells/death/b_c104.spl~ ~override~ //
        SAY NAME1 @50304
        SAY NAME2 @50304
        SAY UNIDENTIFIED_DESC @50305
	SAY DESC @50305
COPY_EXISTING ~d5phdea1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c104~ END // Eyes of the Dead
COPY_EXISTING ~b_c104.spl~ ~override/b_f102.spl~
        SAY UNIDENTIFIED_DESC @50306
	SAY DESC @50306
           WRITE_LONG 0x34 1
                LPF ALTER_EFFECT
                  INT_VAR match_opcode = 324
                  STR_VAR resource = EVAL ~b_f102~
                END
COPY_EXISTING ~d5ffdea1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f102~ END //
		
//Dusrupt Undead_________________________________________________________
//Icons
COPY ~Spells/spheres/spells/death/b_c105b.bam~ ~override~ //
COPY ~Spells/spheres/spells/death/b_c105c.bam~ ~override~ //
//spell etc
COPY ~Spells/spheres/spells/death/b_c105.spl~ ~override~ //
        SAY NAME1 @50307
        SAY NAME2 @50307
        SAY UNIDENTIFIED_DESC @50308
	SAY DESC @50308
COPY_EXISTING ~d5phdea1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c105~ END // Eyes of the Dead
COPY_EXISTING ~b_c105.spl~ ~override/b_f103.spl~
        SAY UNIDENTIFIED_DESC @50309
	SAY DESC @50309
           WRITE_LONG 0x34 1
                LPF ALTER_EFFECT
                  INT_VAR match_opcode = 324
                  STR_VAR resource = EVAL ~b_f103~
                END
COPY_EXISTING ~d5ffdea1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f103~ END //
//__________________________________________________________________________________

//ANIMAL


//Animal Eyes____________________________________________________________
//icons
COPY ~Spells/spheres/spells/animal/b_c102b.bam~ ~override~ // Animal eyes
COPY ~Spells/spheres/spells/animal/b_c102c.bam~ ~override~ // Animal eyes
//spell etc
COPY ~Spells/spheres/spells/animal/b_c102.spl~ ~override~ // Animal eyes
        SAY NAME1 @51101
        SAY NAME2 @51101
        SAY UNIDENTIFIED_DESC @51102
	SAY DESC @51102
COPY_EXISTING ~d5phani1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c102~ END //
COPY_EXISTING ~b_c102.spl~ ~override/b_f101.spl~
        SAY UNIDENTIFIED_DESC @51103
	SAY DESC @51103
           WRITE_LONG 0x34 1
                LPF ALTER_EFFECT
                  INT_VAR match_opcode = 324
                  STR_VAR resource = EVAL ~b_f101~
                END

COPY_EXISTING ~d5ffani1.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f101~ END //
//__________________________________________________________________________________
//DREAD

//Misfire____________________________________________________________________
//icons
COPY ~Spells/spheres/spells/dread/b_c501b.bam~ ~override~ // Misfire
COPY ~Spells/spheres/spells/dread/b_c501c.bam~ ~override~ // Misfire
//spl etc
COPY ~Spells/spheres/spells/dread/b_c501.eff~ ~override~ // Misfire
  SAY 0x1c @50901     //Misfire

COPY ~Spells/spheres/spells/dread/b_c501.spl~ ~override~ // Misfire
        SAY NAME1 @50901
        SAY NAME2 @50901
        SAY UNIDENTIFIED_DESC @50902
	SAY DESC @50902
COPY_EXISTING ~d5phdre5.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c501~ END //
COPY_EXISTING ~b_c501.spl~ ~override/b_f501.spl~
        SAY UNIDENTIFIED_DESC @50903
	SAY DESC @50903
           WRITE_LONG 0x34 4
                LPF ALTER_EFFECT
                  INT_VAR match_opcode = 321
                  STR_VAR resource = EVAL ~b_f501~
                END
COPY_EXISTING ~d5ffdre5.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f501~ END //


//AIR

//Storm Wall_________________________________________________________________
COPY ~Spells/spheres/spells/air/b_elect1.bam~ ~override~ // 
COPY ~Spells/spheres/spells/air/b_storm1.vvc~ ~override~ //
COPY ~Spells/spheres/spells/air/b_c401a.spl~ ~override~ //sub-spell
ADD_PROJECTILE ~Spells/spheres/spells/air/b_storm1.pro~   //pro
COPY ~Spells/spheres/spells/air/b_c401.spl~ ~override~ //spell
        SAY NAME1 @51601
        SAY NAME2 @51601
        SAY UNIDENTIFIED_DESC @51602
	SAY DESC @51602
	WRITE_SHORT 0x098 ~%b_storm1%~
COPY_EXISTING ~d5phair4.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_c401~ END //
COPY_EXISTING ~b_c401.spl~ ~override/b_f401.spl~
        SAY UNIDENTIFIED_DESC @51603
	SAY DESC @51603
           WRITE_LONG 0x34 3
                LPF ALTER_EFFECT
                  INT_VAR match_opcode = 206
                  STR_VAR resource = EVAL ~b_f401~
                END
COPY_EXISTING ~d5ffair4.spl~ ~override~
		LPF CLONE_EFFECT INT_VAR match_opcode=171 STR_VAR match_resource=~SPWI101~ resource = ~b_f401~ END //

     */
